<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="GenHook Development Team" />
  <meta name="dcterms.date" content="2025-08-15" />
  <title>GenHook Complete Documentation Suite</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../styles.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">GenHook Complete Documentation Suite</h1>
<p class="author">GenHook Development Team</p>
<p class="date">2025-08-15</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#genhook-project-notes"
id="toc-genhook-project-notes"><span class="toc-section-number">1</span>
GenHook Project Notes</a>
<ul>
<li><a href="#project-overview" id="toc-project-overview"><span
class="toc-section-number">1.1</span> Project Overview</a>
<ul>
<li><a href="#system-purpose" id="toc-system-purpose"><span
class="toc-section-number">1.1.1</span> System Purpose</a></li>
<li><a href="#key-features" id="toc-key-features"><span
class="toc-section-number">1.1.2</span> Key Features</a></li>
<li><a href="#architecture" id="toc-architecture"><span
class="toc-section-number">1.1.3</span> Architecture</a></li>
</ul></li>
<li><a href="#backend-startup" id="toc-backend-startup"><span
class="toc-section-number">1.2</span> Backend Startup</a></li>
<li><a href="#web-configuration-interface"
id="toc-web-configuration-interface"><span
class="toc-section-number">1.3</span> Web Configuration Interface</a>
<ul>
<li><a href="#overview" id="toc-overview"><span
class="toc-section-number">1.3.1</span> Overview</a></li>
<li><a href="#access-layout" id="toc-access-layout"><span
class="toc-section-number">1.3.2</span> Access &amp; Layout</a></li>
<li><a href="#key-features-1" id="toc-key-features-1"><span
class="toc-section-number">1.3.3</span> Key Features</a></li>
<li><a href="#quick-start-guide" id="toc-quick-start-guide"><span
class="toc-section-number">1.3.4</span> Quick Start Guide</a></li>
<li><a href="#configuration-file-integration"
id="toc-configuration-file-integration"><span
class="toc-section-number">1.3.5</span> Configuration File
Integration</a></li>
<li><a href="#web-interface-configuration"
id="toc-web-interface-configuration"><span
class="toc-section-number">1.3.6</span> Web Interface
Configuration</a></li>
</ul></li>
<li><a href="#webhook-security-tokenization"
id="toc-webhook-security-tokenization"><span
class="toc-section-number">1.4</span> Webhook Security &amp;
Tokenization</a>
<ul>
<li><a href="#overview-1" id="toc-overview-1"><span
class="toc-section-number">1.4.1</span> Overview</a></li>
<li><a href="#key-security-features"
id="toc-key-security-features"><span
class="toc-section-number">1.4.2</span> Key Security Features</a></li>
<li><a href="#user-experience" id="toc-user-experience"><span
class="toc-section-number">1.4.3</span> User Experience</a></li>
<li><a href="#technical-implementation"
id="toc-technical-implementation"><span
class="toc-section-number">1.4.4</span> Technical
Implementation</a></li>
<li><a href="#api-endpoints" id="toc-api-endpoints"><span
class="toc-section-number">1.4.5</span> API Endpoints</a></li>
<li><a href="#migration-compatibility"
id="toc-migration-compatibility"><span
class="toc-section-number">1.4.6</span> Migration &amp;
Compatibility</a></li>
</ul></li>
<li><a href="#supported-webhook-sources"
id="toc-supported-webhook-sources"><span
class="toc-section-number">1.5</span> Supported Webhook Sources</a>
<ul>
<li><a href="#service-providers" id="toc-service-providers"><span
class="toc-section-number">1.5.1</span> Service Providers</a></li>
<li><a href="#configuration-format-1"
id="toc-configuration-format-1"><span
class="toc-section-number">1.5.2</span> Configuration Format</a></li>
<li><a href="#field-extraction-patterns"
id="toc-field-extraction-patterns"><span
class="toc-section-number">1.5.3</span> Field Extraction
Patterns</a></li>
</ul></li>
<li><a href="#technical-architecture"
id="toc-technical-architecture"><span
class="toc-section-number">1.6</span> Technical Architecture</a>
<ul>
<li><a href="#threading-models" id="toc-threading-models"><span
class="toc-section-number">1.6.1</span> Threading Models</a></li>
<li><a href="#configuration-parameters"
id="toc-configuration-parameters"><span
class="toc-section-number">1.6.2</span> Configuration
Parameters</a></li>
<li><a href="#sl1-integration" id="toc-sl1-integration"><span
class="toc-section-number">1.6.3</span> SL1 Integration</a></li>
<li><a href="#queue-management" id="toc-queue-management"><span
class="toc-section-number">1.6.4</span> Queue Management</a></li>
</ul></li>
<li><a href="#configuration-system" id="toc-configuration-system"><span
class="toc-section-number">1.7</span> Configuration System</a>
<ul>
<li><a href="#dynamic-configuration-loading"
id="toc-dynamic-configuration-loading"><span
class="toc-section-number">1.7.1</span> Dynamic Configuration
Loading</a></li>
<li><a href="#template-variables" id="toc-template-variables"><span
class="toc-section-number">1.7.2</span> Template Variables</a></li>
<li><a href="#template-examples" id="toc-template-examples"><span
class="toc-section-number">1.7.3</span> Template Examples</a></li>
<li><a href="#environment-configuration"
id="toc-environment-configuration"><span
class="toc-section-number">1.7.4</span> Environment
Configuration</a></li>
</ul></li>
<li><a href="#development-phases" id="toc-development-phases"><span
class="toc-section-number">1.8</span> Development Phases</a>
<ul>
<li><a href="#phase-1-core-system" id="toc-phase-1-core-system"><span
class="toc-section-number">1.8.1</span> Phase 1: Core System</a></li>
<li><a href="#phase-2-multi-threading"
id="toc-phase-2-multi-threading"><span
class="toc-section-number">1.8.2</span> Phase 2:
Multi-Threading</a></li>
<li><a href="#phase-3-production-features"
id="toc-phase-3-production-features"><span
class="toc-section-number">1.8.3</span> Phase 3: Production
Features</a></li>
<li><a href="#phase-4-operations" id="toc-phase-4-operations"><span
class="toc-section-number">1.8.4</span> Phase 4: Operations</a></li>
<li><a href="#current-status" id="toc-current-status"><span
class="toc-section-number">1.8.5</span> Current Status</a></li>
</ul></li>
<li><a href="#production-deployment"
id="toc-production-deployment"><span
class="toc-section-number">1.9</span> Production Deployment</a>
<ul>
<li><a href="#port-configuration-configuration-driven"
id="toc-port-configuration-configuration-driven"><span
class="toc-section-number">1.9.1</span> Port Configuration
(Configuration-Driven)</a></li>
<li><a href="#aws-deployment-considerations"
id="toc-aws-deployment-considerations"><span
class="toc-section-number">1.9.2</span> AWS Deployment
Considerations</a></li>
<li><a href="#reverse-proxy-configuration-nginx"
id="toc-reverse-proxy-configuration-nginx"><span
class="toc-section-number">1.9.3</span> Reverse Proxy Configuration
(nginx)</a></li>
<li><a href="#environment-variables-for-production"
id="toc-environment-variables-for-production"><span
class="toc-section-number">1.9.4</span> Environment Variables for
Production</a></li>
<li><a href="#configuration-files-for-production"
id="toc-configuration-files-for-production"><span
class="toc-section-number">1.9.5</span> Configuration Files for
Production</a></li>
<li><a href="#security-checklist" id="toc-security-checklist"><span
class="toc-section-number">1.9.6</span> Security Checklist</a></li>
</ul></li>
<li><a href="#security-performance" id="toc-security-performance"><span
class="toc-section-number">1.10</span> Security &amp; Performance</a>
<ul>
<li><a href="#security-considerations-1"
id="toc-security-considerations-1"><span
class="toc-section-number">1.10.1</span> Security
Considerations</a></li>
<li><a href="#error-handling-strategy"
id="toc-error-handling-strategy"><span
class="toc-section-number">1.10.2</span> Error Handling
Strategy</a></li>
<li><a href="#performance-optimization"
id="toc-performance-optimization"><span
class="toc-section-number">1.10.3</span> Performance
Optimization</a></li>
<li><a href="#monitoring-points" id="toc-monitoring-points"><span
class="toc-section-number">1.10.4</span> Monitoring Points</a></li>
<li><a href="#key-metrics-to-track" id="toc-key-metrics-to-track"><span
class="toc-section-number">1.10.5</span> Key Metrics to Track</a></li>
</ul></li>
<li><a href="#web-configuration-interface-plan"
id="toc-web-configuration-interface-plan"><span
class="toc-section-number">1.11</span> Web Configuration Interface
Plan</a>
<ul>
<li><a href="#overview-2" id="toc-overview-2"><span
class="toc-section-number">1.11.1</span> Overview</a></li>
<li><a href="#key-features-2" id="toc-key-features-2"><span
class="toc-section-number">1.11.2</span> Key Features</a></li>
<li><a href="#architecture-1" id="toc-architecture-1"><span
class="toc-section-number">1.11.3</span> Architecture</a></li>
<li><a href="#implementation-structure"
id="toc-implementation-structure"><span
class="toc-section-number">1.11.4</span> Implementation
Structure</a></li>
<li><a href="#user-workflow" id="toc-user-workflow"><span
class="toc-section-number">1.11.5</span> User Workflow</a></li>
<li><a href="#documentation" id="toc-documentation"><span
class="toc-section-number">1.11.6</span> Documentation</a></li>
<li><a href="#benefits" id="toc-benefits"><span
class="toc-section-number">1.11.7</span> Benefits</a></li>
</ul></li>
<li><a href="#webhook-payload-logging"
id="toc-webhook-payload-logging"><span
class="toc-section-number">1.12</span> Webhook Payload Logging</a>
<ul>
<li><a href="#overview-3" id="toc-overview-3"><span
class="toc-section-number">1.12.1</span> Overview</a></li>
<li><a href="#features" id="toc-features"><span
class="toc-section-number">1.12.2</span> Features</a></li>
<li><a href="#configuration" id="toc-configuration"><span
class="toc-section-number">1.12.3</span> Configuration</a></li>
<li><a href="#directory-structure" id="toc-directory-structure"><span
class="toc-section-number">1.12.4</span> Directory Structure</a></li>
<li><a href="#web-interface-features"
id="toc-web-interface-features"><span
class="toc-section-number">1.12.5</span> Web Interface Features</a></li>
<li><a href="#production-deployment-aws"
id="toc-production-deployment-aws"><span
class="toc-section-number">1.12.6</span> Production Deployment
(AWS)</a></li>
<li><a href="#production-notes" id="toc-production-notes"><span
class="toc-section-number">1.12.7</span> Production Notes</a></li>
<li><a href="#troubleshooting" id="toc-troubleshooting"><span
class="toc-section-number">1.12.8</span> Troubleshooting</a></li>
<li><a href="#log-format" id="toc-log-format"><span
class="toc-section-number">1.12.9</span> Log Format</a></li>
<li><a href="#api-endpoints-1" id="toc-api-endpoints-1"><span
class="toc-section-number">1.12.10</span> API Endpoints</a></li>
<li><a href="#benefits-1" id="toc-benefits-1"><span
class="toc-section-number">1.12.11</span> Benefits</a></li>
<li><a href="#enhanced-user-workflow"
id="toc-enhanced-user-workflow"><span
class="toc-section-number">1.12.12</span> Enhanced User
Workflow</a></li>
</ul></li>
</ul></li>
<li><a href="#genhook-production-deployment-guide"
id="toc-genhook-production-deployment-guide"><span
class="toc-section-number">2</span> GenHook Production Deployment
Guide</a>
<ul>
<li><a href="#overview-4" id="toc-overview-4"><span
class="toc-section-number">2.1</span> Overview</a></li>
<li><a href="#architecture-overview"
id="toc-architecture-overview"><span
class="toc-section-number">2.2</span> Architecture Overview</a></li>
<li><a href="#pre-production-checklist"
id="toc-pre-production-checklist"><span
class="toc-section-number">2.3</span> Pre-Production Checklist</a>
<ul>
<li><a href="#code-readiness" id="toc-code-readiness"><span
class="toc-section-number">2.3.1</span> ✅ Code Readiness</a></li>
<li><a href="#security" id="toc-security"><span
class="toc-section-number">2.3.2</span> ✅ Security</a></li>
<li><a href="#configuration-1" id="toc-configuration-1"><span
class="toc-section-number">2.3.3</span> ✅ Configuration</a></li>
</ul></li>
<li><a href="#port-configuration-strategy"
id="toc-port-configuration-strategy"><span
class="toc-section-number">2.4</span> Port Configuration Strategy</a>
<ul>
<li><a href="#configuration-files" id="toc-configuration-files"><span
class="toc-section-number">2.4.1</span> Configuration Files</a></li>
<li><a href="#port-configuration-options"
id="toc-port-configuration-options"><span
class="toc-section-number">2.4.2</span> Port Configuration
Options</a></li>
<li><a href="#configuration-priority"
id="toc-configuration-priority"><span
class="toc-section-number">2.4.3</span> Configuration Priority</a></li>
</ul></li>
<li><a href="#deployment-options" id="toc-deployment-options"><span
class="toc-section-number">2.5</span> Deployment Options</a>
<ul>
<li><a
href="#option-1-aws-ec2-with-application-load-balancer-recommended"
id="toc-option-1-aws-ec2-with-application-load-balancer-recommended"><span
class="toc-section-number">2.5.1</span> Option 1: AWS EC2 with
Application Load Balancer (Recommended)</a></li>
<li><a href="#option-2-docker-deployment"
id="toc-option-2-docker-deployment"><span
class="toc-section-number">2.5.2</span> Option 2: Docker
Deployment</a></li>
</ul></li>
<li><a href="#configuration-management-2"
id="toc-configuration-management-2"><span
class="toc-section-number">2.6</span> Configuration Management</a>
<ul>
<li><a href="#production-configuration-files"
id="toc-production-configuration-files"><span
class="toc-section-number">2.6.1</span> Production Configuration
Files</a></li>
</ul></li>
<li><a href="#monitoring-and-logging"
id="toc-monitoring-and-logging"><span
class="toc-section-number">2.7</span> Monitoring and Logging</a>
<ul>
<li><a href="#cloudwatch-integration-aws"
id="toc-cloudwatch-integration-aws"><span
class="toc-section-number">2.7.1</span> CloudWatch Integration
(AWS)</a></li>
<li><a href="#metrics-and-alerts" id="toc-metrics-and-alerts"><span
class="toc-section-number">2.7.2</span> Metrics and Alerts</a></li>
</ul></li>
<li><a href="#security-configuration"
id="toc-security-configuration"><span
class="toc-section-number">2.8</span> Security Configuration</a>
<ul>
<li><a href="#ssltls-setup" id="toc-ssltls-setup"><span
class="toc-section-number">2.8.1</span> SSL/TLS Setup</a></li>
<li><a href="#access-control" id="toc-access-control"><span
class="toc-section-number">2.8.2</span> Access Control</a></li>
<li><a href="#webhook-signature-verification"
id="toc-webhook-signature-verification"><span
class="toc-section-number">2.8.3</span> Webhook Signature
Verification</a></li>
</ul></li>
<li><a href="#backup-and-recovery" id="toc-backup-and-recovery"><span
class="toc-section-number">2.9</span> Backup and Recovery</a>
<ul>
<li><a href="#automated-backups" id="toc-automated-backups"><span
class="toc-section-number">2.9.1</span> Automated Backups</a></li>
<li><a href="#recovery-procedure" id="toc-recovery-procedure"><span
class="toc-section-number">2.9.2</span> Recovery Procedure</a></li>
</ul></li>
<li><a href="#performance-tuning" id="toc-performance-tuning"><span
class="toc-section-number">2.10</span> Performance Tuning</a>
<ul>
<li><a href="#application-settings" id="toc-application-settings"><span
class="toc-section-number">2.10.1</span> Application Settings</a></li>
<li><a href="#system-tuning" id="toc-system-tuning"><span
class="toc-section-number">2.10.2</span> System Tuning</a></li>
</ul></li>
<li><a href="#troubleshooting-1" id="toc-troubleshooting-1"><span
class="toc-section-number">2.11</span> Troubleshooting</a>
<ul>
<li><a href="#common-issues" id="toc-common-issues"><span
class="toc-section-number">2.11.1</span> Common Issues</a></li>
<li><a href="#log-analysis" id="toc-log-analysis"><span
class="toc-section-number">2.11.2</span> Log Analysis</a></li>
</ul></li>
<li><a href="#maintenance" id="toc-maintenance"><span
class="toc-section-number">2.12</span> Maintenance</a>
<ul>
<li><a href="#updates" id="toc-updates"><span
class="toc-section-number">2.12.1</span> Updates</a></li>
<li><a href="#health-monitoring" id="toc-health-monitoring"><span
class="toc-section-number">2.12.2</span> Health Monitoring</a></li>
</ul></li>
</ul></li>
<li><a href="#genhook-aws-deployment-guide"
id="toc-genhook-aws-deployment-guide"><span
class="toc-section-number">3</span> GenHook AWS Deployment Guide</a>
<ul>
<li><a href="#overview-5" id="toc-overview-5"><span
class="toc-section-number">3.1</span> Overview</a></li>
<li><a href="#architecture-diagram" id="toc-architecture-diagram"><span
class="toc-section-number">3.2</span> Architecture Diagram</a></li>
<li><a href="#aws-services-used" id="toc-aws-services-used"><span
class="toc-section-number">3.3</span> AWS Services Used</a></li>
<li><a href="#step-by-step-deployment"
id="toc-step-by-step-deployment"><span
class="toc-section-number">3.4</span> Step-by-Step Deployment</a>
<ul>
<li><a href="#vpc-and-security-setup"
id="toc-vpc-and-security-setup"><span
class="toc-section-number">3.4.1</span> 1. VPC and Security
Setup</a></li>
<li><a href="#ssl-certificate-setup"
id="toc-ssl-certificate-setup"><span
class="toc-section-number">3.4.2</span> 2. SSL Certificate
Setup</a></li>
<li><a href="#secrets-manager-setup"
id="toc-secrets-manager-setup"><span
class="toc-section-number">3.4.3</span> 3. Secrets Manager
Setup</a></li>
<li><a href="#launch-template-creation"
id="toc-launch-template-creation"><span
class="toc-section-number">3.4.4</span> 4. Launch Template
Creation</a></li>
<li><a href="#iam-roles-and-policies"
id="toc-iam-roles-and-policies"><span
class="toc-section-number">3.4.5</span> 5. IAM Roles and
Policies</a></li>
<li><a href="#application-load-balancer-setup"
id="toc-application-load-balancer-setup"><span
class="toc-section-number">3.4.6</span> 6. Application Load Balancer
Setup</a></li>
<li><a href="#auto-scaling-group" id="toc-auto-scaling-group"><span
class="toc-section-number">3.4.7</span> 7. Auto Scaling Group</a></li>
<li><a href="#cloudwatch-monitoring"
id="toc-cloudwatch-monitoring"><span
class="toc-section-number">3.4.8</span> 8. CloudWatch
Monitoring</a></li>
<li><a href="#route-53-dns-setup" id="toc-route-53-dns-setup"><span
class="toc-section-number">3.4.9</span> 9. Route 53 DNS Setup</a></li>
<li><a href="#configuration-backup-to-s3"
id="toc-configuration-backup-to-s3"><span
class="toc-section-number">3.4.10</span> 10. Configuration Backup to
S3</a></li>
</ul></li>
<li><a href="#web-interface-access-control"
id="toc-web-interface-access-control"><span
class="toc-section-number">3.5</span> Web Interface Access Control</a>
<ul>
<li><a href="#alb-listener-rules-for-web-interface"
id="toc-alb-listener-rules-for-web-interface"><span
class="toc-section-number">3.5.1</span> ALB Listener Rules for Web
Interface</a></li>
</ul></li>
<li><a href="#cost-optimization" id="toc-cost-optimization"><span
class="toc-section-number">3.6</span> Cost Optimization</a>
<ul>
<li><a href="#instance-rightsizing" id="toc-instance-rightsizing"><span
class="toc-section-number">3.6.1</span> Instance Rightsizing</a></li>
<li><a href="#reserved-instances" id="toc-reserved-instances"><span
class="toc-section-number">3.6.2</span> Reserved Instances</a></li>
</ul></li>
<li><a href="#disaster-recovery" id="toc-disaster-recovery"><span
class="toc-section-number">3.7</span> Disaster Recovery</a>
<ul>
<li><a href="#multi-az-deployment" id="toc-multi-az-deployment"><span
class="toc-section-number">3.7.1</span> Multi-AZ Deployment</a></li>
<li><a href="#cross-region-backup" id="toc-cross-region-backup"><span
class="toc-section-number">3.7.2</span> Cross-Region Backup</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 data-number="1" id="genhook-project-notes"><span
class="header-section-number">1</span> GenHook Project Notes</h1>
<h2 data-number="1.1" id="project-overview"><span
class="header-section-number">1.1</span> Project Overview</h2>
<h3 data-number="1.1.1" id="system-purpose"><span
class="header-section-number">1.1.1</span> System Purpose</h3>
<p>GenHook is a configuration-driven, multi-threaded webhook receiver
that: - Accepts webhooks from multiple services (GitHub, Stripe, Slack,
AWS, etc.) - Extracts specified fields using configuration files -
Generates human-readable messages using templates - Forwards events to
SL1 monitoring system via API</p>
<h3 data-number="1.1.2" id="key-features"><span
class="header-section-number">1.1.2</span> Key Features</h3>
<ul>
<li><strong>Configuration-Driven</strong>: No code changes needed for
new webhook types</li>
<li><strong>Dynamic Configuration Loading</strong>: Configuration
changes take effect immediately without service restarts</li>
<li><strong>Multi-Threaded</strong>: Handle thousands of concurrent
webhooks</li>
<li><strong>Template-Based Messaging</strong>: Flexible message
generation</li>
<li><strong>SL1 Integration</strong>: Direct API integration with
default values</li>
<li><strong>Error Handling</strong>: Graceful failure handling and retry
logic</li>
</ul>
<h3 data-number="1.1.3" id="architecture"><span
class="header-section-number">1.1.3</span> Architecture</h3>
<ul>
<li>FastAPI-based HTTP server</li>
<li>7-step processing pipeline: Reception → Identification →
Configuration Lookup → Field Extraction → Message Generation → SL1 API
Call → Error Handling</li>
<li>Configurable threading models: Thread Pool Pattern, Async Event
Loop, or Hybrid Approach</li>
<li>Queue management with in-memory and persistent options</li>
</ul>
<h2 data-number="1.2" id="backend-startup"><span
class="header-section-number">1.2</span> Backend Startup</h2>
<p>Always start the backend when working on this project:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> backend <span class="kw">&amp;&amp;</span> <span class="ex">./start.sh</span></span></code></pre></div>
<p>Or manually:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> backend</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ../venv/bin/activate</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ex">pip</span> install <span class="at">-r</span> requirements.txt</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> main.py</span></code></pre></div>
<p>Backend runs at: http://localhost:8000 API docs at:
http://localhost:8000/docs</p>
<h2 data-number="1.3" id="web-configuration-interface"><span
class="header-section-number">1.3</span> Web Configuration
Interface</h2>
<h3 data-number="1.3.1" id="overview"><span
class="header-section-number">1.3.1</span> Overview</h3>
<p>GenHook features a professional, responsive web-based configuration
interface with a modern 2-column layout. The interface eliminates manual
file editing and provides a complete webhook configuration management
system with real-time testing and validation.</p>
<h3 data-number="1.3.2" id="access-layout"><span
class="header-section-number">1.3.2</span> Access &amp; Layout</h3>
<ul>
<li><strong>Web Interface</strong>: http://localhost:8000/config</li>
<li><strong>Professional 65/35 Layout</strong>: Configuration table and
wizard on the left (65%), payload sidebar on the right (35%)</li>
<li><strong>Responsive Design</strong>: Optimized for desktop and mobile
with intelligent breakpoints</li>
<li><strong>Sticky Sidebar</strong>: Payload section stays visible while
scrolling through configurations</li>
</ul>
<h3 data-number="1.3.3" id="key-features-1"><span
class="header-section-number">1.3.3</span> Key Features</h3>
<h4 data-number="1.3.3.1" id="modern-2-column-interface"><span
class="header-section-number">1.3.3.1</span> 1. <strong>Modern 2-Column
Interface</strong></h4>
<ul>
<li><strong>Left Column</strong>: Configuration table and 3-step wizard
(65% width)</li>
<li><strong>Right Column</strong>: Payload loading and JSON editing
sidebar (35% width)</li>
<li><strong>Hidden-by-Default Wizard</strong>: Clean interface with “New
Config” button in table header</li>
<li><strong>Real-time Updates</strong>: All changes take effect
immediately without service restarts</li>
</ul>
<h4 data-number="1.3.3.2" id="step-configuration-wizard"><span
class="header-section-number">1.3.3.2</span> 2. <strong>3-Step
Configuration Wizard</strong></h4>
<ul>
<li><strong>Step 1: Basic Information</strong> - Webhook type name and
quick templates</li>
<li><strong>Step 2: Field Selection</strong> - Visual field selection
with existing configurations displayed</li>
<li><strong>Step 3: Template Building</strong> - Message template
creation with live preview</li>
</ul>
<h4 data-number="1.3.3.3" id="enhanced-payload-sidebar"><span
class="header-section-number">1.3.3.3</span> 3. <strong>Enhanced Payload
Sidebar</strong></h4>
<ul>
<li><strong>Recent Payload Loading</strong>: Auto-load from previous
webhook executions by type</li>
<li><strong>Auto-Loading Dropdowns</strong>: Automatic payload loading
when selections change</li>
<li><strong>JSON Validation</strong>: Real-time syntax validation and
error reporting</li>
<li><strong>Sticky Positioning</strong>: Always visible during
configuration workflow</li>
</ul>
<h4 data-number="1.3.3.4" id="improved-edit-mode"><span
class="header-section-number">1.3.3.4</span> 4. <strong>Improved Edit
Mode</strong></h4>
<ul>
<li><strong>Shows Existing Data</strong>: Displays current field
selections and message template</li>
<li><strong>Step 2 Start</strong>: Begins editing in field selection to
show what’s currently configured</li>
<li><strong>Modify Everything</strong>: Change field selections,
reorganize variables, edit templates</li>
<li><strong>Visual Field Display</strong>: Checkboxes show current
selections, enable modifications</li>
</ul>
<h4 data-number="1.3.3.5" id="configuration-management"><span
class="header-section-number">1.3.3.5</span> 5. <strong>Configuration
Management</strong></h4>
<ul>
<li><strong>Professional Table</strong>: Clean overview of all webhook
configurations</li>
<li><strong>Inline Actions</strong>: Edit and delete buttons for each
configuration</li>
<li><strong>Automatic Backups</strong>: Safe configuration updates with
rollback capability</li>
<li><strong>Dynamic Loading</strong>: No service restarts required for
configuration changes</li>
</ul>
<h3 data-number="1.3.4" id="quick-start-guide"><span
class="header-section-number">1.3.4</span> Quick Start Guide</h3>
<h4 data-number="1.3.4.1"
id="creating-a-new-webhook-configuration"><span
class="header-section-number">1.3.4.1</span> Creating a New Webhook
Configuration:</h4>
<ol type="1">
<li>Navigate to http://localhost:8000/config</li>
<li>Click the <strong>“New Config”</strong> button in the configurations
table header</li>
<li>Enter webhook type name (e.g., “github”, “stripe”) in Step 1</li>
<li>Use the <strong>payload sidebar</strong> to load a recent payload or
paste JSON data</li>
<li>Click <strong>“Analyze Payload”</strong> to discover extractable
fields (→ Step 2)</li>
<li><strong>Select fields</strong> using checkboxes - see real-time
field pattern generation</li>
<li>Click <strong>“Create Template”</strong> to proceed to Step 3</li>
<li><strong>Build your message template</strong> using variables like
<code>$field.name$</code></li>
<li>Click <strong>“Test Config”</strong> to validate with the sidebar
payload</li>
<li>Click <strong>“Save Configuration”</strong> (takes effect
immediately)</li>
</ol>
<h4 data-number="1.3.4.2" id="editing-existing-configurations"><span
class="header-section-number">1.3.4.2</span> Editing Existing
Configurations:</h4>
<ol type="1">
<li>Click the <strong>edit button</strong> (pencil icon) on any
configuration</li>
<li><strong>Step 2 opens</strong> showing current field selections with
pre-checked boxes</li>
<li><strong>Modify field selections</strong> - check/uncheck fields as
needed</li>
<li>Use the <strong>payload sidebar</strong> to load recent payloads for
testing</li>
<li>Click <strong>“Create Template”</strong> to proceed to template
editing (Step 3)</li>
<li><strong>Edit the message template</strong> - reorganize variables,
modify text</li>
<li>Click <strong>“Test Config”</strong> to validate changes with
sidebar payload</li>
<li>Click <strong>“Save Configuration”</strong> to update (takes effect
immediately)</li>
</ol>
<h4 data-number="1.3.4.3" id="using-the-payload-sidebar"><span
class="header-section-number">1.3.4.3</span> Using the Payload
Sidebar:</h4>
<ol type="1">
<li><strong>Select webhook type</strong> from dropdown to load recent
payloads</li>
<li><strong>Choose recent payload</strong> - auto-loads when selected
(no manual button)</li>
<li><strong>Or paste JSON directly</strong> into the payload
textarea</li>
<li><strong>Validate JSON</strong> using the validation button for
syntax checking</li>
<li><strong>Payload stays loaded</strong> throughout the entire
configuration workflow</li>
</ol>
<h3 data-number="1.3.5" id="configuration-file-integration"><span
class="header-section-number">1.3.5</span> Configuration File
Integration</h3>
<ul>
<li>Configurations are saved to
<code>backend/config/webhook-config.ini</code></li>
<li>Automatic backup creation in
<code>backend/config/backups/</code></li>
<li><strong>Dynamic Loading</strong>: Changes take effect immediately
without service restarts</li>
<li>No manual file editing required</li>
</ul>
<h3 data-number="1.3.6" id="web-interface-configuration"><span
class="header-section-number">1.3.6</span> Web Interface
Configuration</h3>
<p>The web interface can be configured via
<code>backend/config/web-config.ini</code>:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[ui]</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="dt">enabled </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="dt">max_analysis_depth </span><span class="ot">=</span><span class="st"> </span><span class="dv">3</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="dt">timeout_seconds </span><span class="ot">=</span><span class="st"> </span><span class="dv">30</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">[features]</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="dt">backup_configs </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="dt">enable_config_validation </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="dt">enable_live_preview </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span></code></pre></div>
<h2 data-number="1.4" id="webhook-security-tokenization"><span
class="header-section-number">1.4</span> Webhook Security &amp;
Tokenization</h2>
<h3 data-number="1.4.1" id="overview-1"><span
class="header-section-number">1.4.1</span> Overview</h3>
<p>GenHook implements a comprehensive token-based security system for
webhook endpoints. Each webhook configuration includes a unique,
cryptographically secure token that authenticates incoming webhooks and
enables multiple configurations per service type.</p>
<h3 data-number="1.4.2" id="key-security-features"><span
class="header-section-number">1.4.2</span> Key Security Features</h3>
<h4 data-number="1.4.2.1" id="token-based-authentication"><span
class="header-section-number">1.4.2.1</span> 1. <strong>Token-Based
Authentication</strong></h4>
<ul>
<li><strong>Unique Tokens</strong>: Each webhook configuration gets a
32-character cryptographically secure token</li>
<li><strong>URL Format</strong>:
<code>https://your-domain.com/webhook/{service}/{token}</code></li>
<li><strong>Multiple Configs</strong>: Support multiple webhook
configurations per service type</li>
<li><strong>Token Validation</strong>: Incoming webhooks validated
against stored tokens before processing</li>
</ul>
<h4 data-number="1.4.2.2" id="secure-token-generation"><span
class="header-section-number">1.4.2.2</span> 2. <strong>Secure Token
Generation</strong></h4>
<ul>
<li><strong>Algorithm</strong>: Uses Python’s <code>secrets</code>
module for cryptographic security</li>
<li><strong>Length</strong>: 32 characters (alphanumeric: a-z, A-Z,
0-9)</li>
<li><strong>Uniqueness</strong>: Automatic uniqueness validation across
all existing configurations</li>
<li><strong>Generation Timing</strong>: Tokens generated only when
saving new configurations</li>
</ul>
<h4 data-number="1.4.2.3" id="configuration-format"><span
class="header-section-number">1.4.2.3</span> 3. <strong>Configuration
Format</strong></h4>
<div class="sourceCode" id="cb4"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Format: service_token = fields::template</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="dt">github_abc123xyz </span><span class="ot">=</span><span class="st"> action,repository{name}::GitHub $action$ on $repository.name$</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="dt">stripe_def456uvw </span><span class="ot">=</span><span class="st"> data{object}{amount}::Payment of $data.object.amount$</span></span></code></pre></div>
<h3 data-number="1.4.3" id="user-experience"><span
class="header-section-number">1.4.3</span> User Experience</h3>
<h4 data-number="1.4.3.1" id="new-configuration-workflow"><span
class="header-section-number">1.4.3.1</span> <strong>New Configuration
Workflow:</strong></h4>
<ol type="1">
<li>User creates webhook configuration through web interface</li>
<li>System generates unique token automatically on save</li>
<li><strong>Success Modal</strong>: Wide modal displays complete webhook
URL for easy copying</li>
<li><strong>One-Click Copy</strong>: Single button copies entire URL
including token</li>
<li><strong>Clear Messaging</strong>: “Save this URL securely - you can
also copy it later from the configuration table”</li>
</ol>
<h4 data-number="1.4.3.2" id="edit-configuration-workflow"><span
class="header-section-number">1.4.3.2</span> <strong>Edit Configuration
Workflow:</strong></h4>
<ol type="1">
<li>User edits existing configuration (template changes only)</li>
<li><strong>Token Preserved</strong>: Existing token remains
unchanged</li>
<li><strong>No Modal</strong>: Simple success notification instead of
popup</li>
<li><strong>URL Accessible</strong>: Webhook URL remains accessible via
configuration table</li>
</ol>
<h4 data-number="1.4.3.3" id="configuration-management-1"><span
class="header-section-number">1.4.3.3</span> <strong>Configuration
Management:</strong></h4>
<ul>
<li><strong>Table View</strong>: Displays service name and truncated
token (<code>abc123...</code>)</li>
<li><strong>Copy URL Button</strong>: Quick access to complete webhook
URL with token</li>
<li><strong>Edit/Delete</strong>: Standard CRUD operations with token
preservation</li>
<li><strong>No False Security</strong>: Honest messaging about token
accessibility</li>
</ul>
<h3 data-number="1.4.4" id="technical-implementation"><span
class="header-section-number">1.4.4</span> Technical Implementation</h3>
<h4 data-number="1.4.4.1" id="backend-architecture"><span
class="header-section-number">1.4.4.1</span> <strong>Backend
Architecture:</strong></h4>
<ul>
<li><strong>Endpoint</strong>: <code>/webhook/{service}/{token}</code>
validates token before processing</li>
<li><strong>Config Storage</strong>:
<code>service_token = fields::template</code> format in INI files</li>
<li><strong>Token Service</strong>: Dedicated service for generation and
uniqueness validation</li>
<li><strong>Message Format</strong>: SL1 messages include
<code>service:token:</code> prefix for source identification</li>
</ul>
<h4 data-number="1.4.4.2" id="security-considerations"><span
class="header-section-number">1.4.4.2</span> <strong>Security
Considerations:</strong></h4>
<ul>
<li><strong>ConfigParser Compatible</strong>: Uses underscore separator
to avoid INI parsing conflicts</li>
<li><strong>No Token Exposure</strong>: Tokens not logged in application
logs</li>
<li><strong>Admin Access Required</strong>: Token visibility requires
administrative web interface access</li>
<li><strong>Practical Security</strong>: Balances security with
user-friendliness and operational needs</li>
</ul>
<h3 data-number="1.4.5" id="api-endpoints"><span
class="header-section-number">1.4.5</span> API Endpoints</h3>
<h4 data-number="1.4.5.1" id="token-management"><span
class="header-section-number">1.4.5.1</span> <strong>Token
Management:</strong></h4>
<ul>
<li><code>GET /api/generate-token</code> - Generate new unique
token</li>
<li><code>POST /api/save-config</code> - Save configuration with
token</li>
<li><code>GET /api/config/{service}/{token}</code> - Retrieve specific
configuration</li>
<li><code>DELETE /api/config/{service}/{token}</code> - Delete tokenized
configuration</li>
</ul>
<h4 data-number="1.4.5.2" id="webhook-reception"><span
class="header-section-number">1.4.5.2</span> <strong>Webhook
Reception:</strong></h4>
<ul>
<li><code>POST /webhook/{service}/{token}</code> - Tokenized webhook
endpoint</li>
<li>Token validation before payload processing</li>
<li>HTTP 404 for invalid tokens</li>
<li>HTTP 200 for valid webhooks with processing</li>
</ul>
<h3 data-number="1.4.6" id="migration-compatibility"><span
class="header-section-number">1.4.6</span> Migration &amp;
Compatibility</h3>
<h4 data-number="1.4.6.1" id="legacy-support"><span
class="header-section-number">1.4.6.1</span> <strong>Legacy
Support:</strong></h4>
<ul>
<li>Existing non-tokenized configurations remain functional</li>
<li>Web interface displays legacy configurations as <code>legacy</code>
tokens</li>
<li>Mixed environments supported (tokenized and legacy configs
coexist)</li>
</ul>
<h4 data-number="1.4.6.2" id="no-backward-compatibility"><span
class="header-section-number">1.4.6.2</span> <strong>No Backward
Compatibility:</strong></h4>
<ul>
<li>New configurations require tokens</li>
<li>Users can delete and recreate legacy configurations with tokens</li>
<li>Web interface encourages migration to tokenized format</li>
</ul>
<h2 data-number="1.5" id="supported-webhook-sources"><span
class="header-section-number">1.5</span> Supported Webhook Sources</h2>
<h3 data-number="1.5.1" id="service-providers"><span
class="header-section-number">1.5.1</span> Service Providers</h3>
<ul>
<li><strong>GitHub</strong>: Push, Pull Request, Issues, Releases</li>
<li><strong>Stripe</strong>: Payments, Subscriptions, Customers</li>
<li><strong>Slack</strong>: Messages, User Actions, App Events</li>
<li><strong>AWS EventBridge/CloudWatch</strong>: EC2, Lambda, S3,
CloudFormation</li>
<li><strong>Cisco Meraki</strong>: Device Alerts, Network Events,
Security Events</li>
<li><strong>Jira</strong>: Issue Updates, Comments, Transitions</li>
<li><strong>Azure Event Grid</strong>: Storage, Resource Management,
Service Bus</li>
<li><strong>Shopify</strong>: Orders, Customers, Products,
Inventory</li>
</ul>
<h3 data-number="1.5.2" id="configuration-format-1"><span
class="header-section-number">1.5.2</span> Configuration Format</h3>
<p>Each webhook configuration uses tokenized INI syntax:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokenized format (current)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="dt">service_token </span><span class="ot">=</span><span class="st"> field1,field2,nested{subfield}::Message template with $variables$</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Examples:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="dt">github_abc123xyz </span><span class="ot">=</span><span class="st"> action,repository{name}::GitHub $action$ on $repository.name$</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="dt">stripe_def456uvw </span><span class="ot">=</span><span class="st"> data{object}{amount}::Stripe payment of $data.object.amount$</span></span></code></pre></div>
<h3 data-number="1.5.3" id="field-extraction-patterns"><span
class="header-section-number">1.5.3</span> Field Extraction
Patterns</h3>
<ul>
<li><strong>Simple Field</strong>: <code>field_name</code></li>
<li><strong>Nested Object</strong>: <code>object{subfield}</code></li>
<li><strong>Deep Nesting</strong>:
<code>level1{level2{level3}}</code></li>
<li><strong>Arrays</strong>:
<code>array_field{item_property}</code></li>
</ul>
<h2 data-number="1.6" id="technical-architecture"><span
class="header-section-number">1.6</span> Technical Architecture</h2>
<h3 data-number="1.6.1" id="threading-models"><span
class="header-section-number">1.6.1</span> Threading Models</h3>
<ol type="1">
<li><strong>Thread Pool Pattern</strong>: HTTP Server → Request Queue →
Thread Pool → SL1 API
<ul>
<li>Use Case: Moderate loads (&lt; 1000 req/sec)</li>
<li>Pros: Simple, predictable resource usage</li>
<li>Cons: Thread creation overhead</li>
</ul></li>
<li><strong>Async Event Loop</strong>: Event Loop → Async Tasks →
Non-blocking I/O
<ul>
<li>Use Case: High concurrency, I/O bound</li>
<li>Pros: Memory efficient, handles 10k+ connections</li>
<li>Cons: Single-threaded CPU processing</li>
</ul></li>
<li><strong>Hybrid Approach</strong>: Async HTTP → Message Queue →
Worker Thread Pool
<ul>
<li>Use Case: Mixed CPU/I/O workloads</li>
<li>Pros: Best of both worlds</li>
<li>Cons: More complex architecture</li>
</ul></li>
</ol>
<h3 data-number="1.6.2" id="configuration-parameters"><span
class="header-section-number">1.6.2</span> Configuration Parameters</h3>
<div class="sourceCode" id="cb6"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Threading Configuration</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="dt">max_worker_threads </span><span class="ot">=</span><span class="st"> </span><span class="dv">50</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="dt">queue_max_size </span><span class="ot">=</span><span class="st"> </span><span class="dv">10000</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="dt">processing_timeout </span><span class="ot">=</span><span class="st"> 30s</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="dt">retry_max_attempts </span><span class="ot">=</span><span class="st"> </span><span class="dv">3</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="dt">shutdown_grace_period </span><span class="ot">=</span><span class="st"> 60s</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Per-webhook limits</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="dt">shopify_max_concurrent </span><span class="ot">=</span><span class="st"> </span><span class="dv">10</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="dt">slack_max_concurrent </span><span class="ot">=</span><span class="st"> </span><span class="dv">20</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="dt">aws_max_concurrent </span><span class="ot">=</span><span class="st"> </span><span class="dv">100</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="dt">meraki_max_concurrent </span><span class="ot">=</span><span class="st"> </span><span class="dv">25</span></span></code></pre></div>
<h3 data-number="1.6.3" id="sl1-integration"><span
class="header-section-number">1.6.3</span> SL1 Integration</h3>
<ul>
<li><strong>API Endpoint</strong>: <code>POST /api/alert</code></li>
<li><strong>Authentication</strong>: HTTP Basic Auth
(username/password)</li>
<li><strong>Payload Format</strong>: Simplified JSON with
<code>message</code> and <code>aligned_resource</code> fields</li>
<li><strong>Alignment Support</strong>: Organization ID
(<code>/api/organization/{id}</code>) or Device ID
(<code>/api/device/{id}</code>)</li>
<li><strong>Default Alignment</strong>: System default
(<code>/api/organization/0</code>)</li>
<li><strong>Configuration Format</strong>:
<code>service_token|alignment|fields|message</code></li>
<li><strong>Retry Logic</strong>: Exponential backoff for failed API
calls</li>
</ul>
<h3 data-number="1.6.4" id="queue-management"><span
class="header-section-number">1.6.4</span> Queue Management</h3>
<ul>
<li><strong>In-Memory</strong>: Low latency, volatile</li>
<li><strong>Persistent</strong>: Redis/RabbitMQ for reliability</li>
<li><strong>Priority</strong>: Different webhook types by
importance</li>
<li><strong>Dead Letter</strong>: Failed processing queue</li>
</ul>
<h2 data-number="1.7" id="configuration-system"><span
class="header-section-number">1.7</span> Configuration System</h2>
<h3 data-number="1.7.1" id="dynamic-configuration-loading"><span
class="header-section-number">1.7.1</span> Dynamic Configuration
Loading</h3>
<p>GenHook implements <strong>dynamic configuration loading</strong> -
configuration changes take effect immediately without requiring service
restarts. This provides significant operational benefits:</p>
<h4 data-number="1.7.1.1" id="key-benefits"><span
class="header-section-number">1.7.1.1</span> Key Benefits</h4>
<ul>
<li><strong>Zero Downtime Configuration Updates</strong>: Modify webhook
configurations while the service continues processing webhooks</li>
<li><strong>Instant Testing</strong>: Test new webhook configurations
immediately after saving</li>
<li><strong>Simplified Operations</strong>: No need to restart services,
coordinate downtime, or use <code>supervisorctl restart</code></li>
<li><strong>Production-Safe</strong>: Configurations are validated and
loaded atomically to prevent partial updates</li>
</ul>
<h4 data-number="1.7.1.2" id="how-it-works"><span
class="header-section-number">1.7.1.2</span> How It Works</h4>
<ol type="1">
<li><strong>Configuration Read on Demand</strong>: Each webhook request
reads the latest configuration from disk</li>
<li><strong>Atomic File Operations</strong>: Configuration files are
updated atomically to prevent partial reads</li>
<li><strong>Automatic Backup</strong>: Previous configurations are
backed up before changes</li>
<li><strong>Real-Time Validation</strong>: Configurations are validated
before being applied</li>
</ol>
<h4 data-number="1.7.1.3" id="what-this-means-for-operations"><span
class="header-section-number">1.7.1.3</span> What This Means for
Operations</h4>
<ul>
<li><strong>Web Interface</strong>: Save configurations and they take
effect immediately</li>
<li><strong>Manual Config Edits</strong>: Direct file edits to
<code>webhook-config.ini</code> are picked up on next webhook</li>
<li><strong>Production Deployments</strong>: Configuration updates
without service interruption</li>
<li><strong>Development Workflow</strong>: Faster iteration when testing
new webhook configurations</li>
</ul>
<h4 data-number="1.7.1.4"
id="important-what-still-requires-restart"><span
class="header-section-number">1.7.1.4</span> Important: What Still
Requires Restart</h4>
<p>While webhook configurations are dynamic, the following changes still
require a service restart: - <strong>Code Changes</strong>: Any
modifications to Python files (main.py, services, etc.) - <strong>App
Configuration</strong>: Changes to <code>app-config.ini</code> (server
settings, ports, etc.) - <strong>Dependencies</strong>: Installing or
updating Python packages - <strong>Web Configuration</strong>: Changes
to <code>web-config.ini</code> settings - <strong>Logging
Levels</strong>: Modifications to logging configuration</p>
<h3 data-number="1.7.2" id="template-variables"><span
class="header-section-number">1.7.2</span> Template Variables</h3>
<ul>
<li><strong>Simple Substitution</strong>: <code>$field_name$</code></li>
<li><strong>Nested Access</strong>: <code>$object.subfield$</code></li>
<li><strong>Array Access</strong>: <code>$array[0].property$</code></li>
</ul>
<h3 data-number="1.7.3" id="template-examples"><span
class="header-section-number">1.7.3</span> Template Examples</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GitHub Events</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="dt">github: action,pull_request{title,user{login}},repository{name}::GitHub $action$ on $repository.name$: &quot;$pull_request.title$&quot; by $pull_request.user.login$</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Stripe Payments</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="dt">stripe: type,data{object{amount,currency,status}}::Stripe $type$: Payment of $data.object.amount$ $data.object.currency$ status: $data.object.status$</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Slack Messages  </span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="dt">slack: event{type,user,text}::Slack $event.type$ from user $event.user$: &quot;$event.text$&quot;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co"># AWS Events</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="dt">aws: detail-type,source,region,detail{instance-id,state}::AWS $detail-type$ from $source$ in $region$: Instance $detail.instance-id$ state: $detail.state$</span></span></code></pre></div>
<h3 data-number="1.7.4" id="environment-configuration"><span
class="header-section-number">1.7.4</span> Environment
Configuration</h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Server Settings</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dt">server_port </span><span class="ot">=</span><span class="st"> </span><span class="dv">8080</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="dt">server_host </span><span class="ot">=</span><span class="st"> 0.0.0.0</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="dt">ssl_enabled </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="dt">ssl_cert_path </span><span class="ot">=</span><span class="st"> /etc/ssl/webhook-receiver.crt</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="dt">ssl_key_path </span><span class="ot">=</span><span class="st"> /etc/ssl/webhook-receiver.key</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co"># SL1 API Settings</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="dt">sl1_api_url </span><span class="ot">=</span><span class="st"> https://sl1.company.com/api/alert</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="dt">sl1_username </span><span class="ot">=</span><span class="st"> your_sl1_username</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="dt">sl1_password </span><span class="ot">=</span><span class="st"> your_sl1_password</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="dt">sl1_timeout </span><span class="ot">=</span><span class="st"> 30s</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="dt">sl1_retry_attempts </span><span class="ot">=</span><span class="st"> </span><span class="dv">3</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Threading Settings</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="dt">max_threads </span><span class="ot">=</span><span class="st"> </span><span class="dv">50</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="dt">queue_size </span><span class="ot">=</span><span class="st"> </span><span class="dv">10000</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="dt">thread_timeout </span><span class="ot">=</span><span class="st"> 30s</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Logging</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a><span class="dt">log_level </span><span class="ot">=</span><span class="st"> INFO</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="dt">log_file </span><span class="ot">=</span><span class="st"> /var/log/webhook-receiver.log</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="dt">log_max_size </span><span class="ot">=</span><span class="st"> 100MB</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="dt">log_rotation </span><span class="ot">=</span><span class="st"> daily</span></span></code></pre></div>
<h2 data-number="1.8" id="development-phases"><span
class="header-section-number">1.8</span> Development Phases</h2>
<h3 data-number="1.8.1" id="phase-1-core-system"><span
class="header-section-number">1.8.1</span> Phase 1: Core System</h3>
<ul class="task-list">
<li><label><input type="checkbox" />HTTP server with webhook
endpoints</label></li>
<li><label><input type="checkbox" />Configuration file
parser</label></li>
<li><label><input type="checkbox" />JSON field extraction
engine</label></li>
<li><label><input type="checkbox" />Template processing
system</label></li>
<li><label><input type="checkbox" />Basic SL1 API
integration</label></li>
</ul>
<h3 data-number="1.8.2" id="phase-2-multi-threading"><span
class="header-section-number">1.8.2</span> Phase 2: Multi-Threading</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Thread pool
implementation</label></li>
<li><label><input type="checkbox" />Request queue system</label></li>
<li><label><input type="checkbox" />Error handling and
retries</label></li>
<li><label><input type="checkbox" />Graceful shutdown
handling</label></li>
<li><label><input type="checkbox" />Resource cleanup</label></li>
</ul>
<h3 data-number="1.8.3" id="phase-3-production-features"><span
class="header-section-number">1.8.3</span> Phase 3: Production
Features</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Webhook signature
verification</label></li>
<li><label><input type="checkbox" />Rate limiting and
throttling</label></li>
<li><label><input type="checkbox" />Comprehensive logging</label></li>
<li><label><input type="checkbox" />Metrics collection</label></li>
<li><label><input type="checkbox" />Health check endpoints</label></li>
</ul>
<h3 data-number="1.8.4" id="phase-4-operations"><span
class="header-section-number">1.8.4</span> Phase 4: Operations</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Configuration
validation</label></li>
<li><label><input type="checkbox" />Performance monitoring</label></li>
<li><label><input type="checkbox" />Alerting on failures</label></li>
<li><label><input type="checkbox" />Documentation and
runbooks</label></li>
<li><label><input type="checkbox" />Deployment automation</label></li>
</ul>
<h3 data-number="1.8.5" id="current-status"><span
class="header-section-number">1.8.5</span> Current Status</h3>
<p>🚀 <strong>Phase 1</strong>: Core System (COMPLETED) - ✅ FastAPI
HTTP server with webhook endpoints - ✅ Configuration file parser and
management - ✅ JSON field extraction engine with array support - ✅
Template processing system - ✅ SL1 API integration with retry logic -
✅ HTTPS/SSL support for secure webhooks - ✅ Empty payload handling
with 200 responses</p>
<p>🎉 <strong>Phase 5</strong>: Web Configuration Interface (COMPLETED)
- ✅ <strong>Professional 2-Column Layout</strong>: 65/35 split with
responsive design and sticky sidebar - ✅ <strong>Enhanced 3-Step
Wizard</strong>: Hidden by default with “New Config” button in table
header - ✅ <strong>Auto-Loading Payload Sidebar</strong>: Recent
payload loading with dropdown auto-selection - ✅ <strong>Improved Edit
Mode</strong>: Shows existing field selections and templates, starts at
Step 2 - ✅ <strong>Visual Field Management</strong>: Checkbox-based
field selection with real-time updates - ✅ <strong>Real-time
Testing</strong>: Test configurations with sidebar payloads before
saving - ✅ <strong>Dynamic Configuration Loading</strong>: No service
restarts required for config changes - ✅ <strong>Professional
UI/UX</strong>: Bootstrap 5 responsive interface with modern design
patterns - ✅ <strong>Production-Ready</strong>: Clean codebase, error
handling, and automatic backups</p>
<p>🎯 <strong>Phase 6</strong>: SL1 Alignment &amp; Enhanced Security
(COMPLETED) - ✅ <strong>SL1 Alignment Configuration</strong>:
Organization/Device ID selection via modal interface - ✅
<strong>Tokenized Webhook URLs</strong>: Unique tokens per configuration
for enhanced security - ✅ <strong>New Configuration Format</strong>:
<code>service_token|alignment|fields|message</code> with backward
compatibility - ✅ <strong>Enhanced SL1 Integration</strong>: Dynamic
<code>aligned_resource</code> parameter in SL1 API calls - ✅
<strong>Copy Token Feature</strong>: Dedicated button to copy tokens for
external use - ✅ <strong>Case Sensitivity Fixes</strong>: Proper
lowercase URL generation matching backend processing - ✅
<strong>Automatic Cleanup</strong>: Remove webhook log directories when
deleting last config for service type - ✅ <strong>Configuration
Management</strong>: SL1 Alignment column in configuration table</p>
<ul>
<li>✅ <strong>Secure URL Format</strong>:
<code>https://domain.com/webhook/{service}/{token}</code> endpoint
structure</li>
<li>✅ <strong>Smart Modal UX</strong>: Wide confirmation modal for new
configs, no popup for edits</li>
<li>✅ <strong>Token Preservation</strong>: Edit mode preserves existing
tokens, only updates templates</li>
<li>✅ <strong>Configuration Format</strong>:
<code>service_token = fields::template</code> INI-compatible format</li>
<li>✅ <strong>Copy-Friendly Interface</strong>: One-click webhook URL
copying from table and modal</li>
<li>✅ <strong>Honest Security</strong>: Clear messaging about token
accessibility and recovery options</li>
<li>✅ <strong>Production-Tested</strong>: Full tokenization system
tested and operational</li>
</ul>
<p>🔧 <strong>Next Phases</strong>: Multi-Threading &amp; Production
Features (PLANNED) - 🟡 Thread pool implementation for high-volume
processing - 🟡 Advanced monitoring and metrics collection - 🟡
Production deployment automation - 🟡 Load balancing and scaling
strategies</p>
<h2 data-number="1.9" id="production-deployment"><span
class="header-section-number">1.9</span> Production Deployment</h2>
<h3 data-number="1.9.1"
id="port-configuration-configuration-driven"><span
class="header-section-number">1.9.1</span> Port Configuration
(Configuration-Driven)</h3>
<p><strong>All port configuration is handled via config files - no code
changes required!</strong></p>
<h4 data-number="1.9.1.1" id="development-mode-default"><span
class="header-section-number">1.9.1.1</span> Development Mode
(default)</h4>
<ul>
<li>GenHook reads <code>backend/config/app-config.ini</code></li>
<li>Default port: 8000 (HTTP)</li>
<li>Access: http://localhost:8000</li>
</ul>
<h4 data-number="1.9.1.2" id="production-mode-options"><span
class="header-section-number">1.9.1.2</span> Production Mode
Options</h4>
<p><strong>Option 1: Direct HTTPS (Port 443)</strong></p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create backend/config/app-config.prod.ini</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[server]</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="dt">host </span><span class="ot">=</span><span class="st"> 0.0.0.0</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="dt">port </span><span class="ot">=</span><span class="st"> </span><span class="dv">443</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="dt">reload </span><span class="ot">=</span><span class="st"> </span><span class="kw">false</span></span></code></pre></div>
<p><strong>Option 2: Reverse Proxy (Recommended)</strong></p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep default port 8000 in app-config.ini</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use nginx/Apache to proxy port 443 → 8000</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">[server]</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="dt">host </span><span class="ot">=</span><span class="st"> 0.0.0.0</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="dt">port </span><span class="ot">=</span><span class="st"> </span><span class="dv">8000</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="dt">reload </span><span class="ot">=</span><span class="st"> </span><span class="kw">false</span></span></code></pre></div>
<p><strong>Option 3: Custom Port</strong></p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Any port you need</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[server]</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="dt">host </span><span class="ot">=</span><span class="st"> 0.0.0.0</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="dt">port </span><span class="ot">=</span><span class="st"> 9000  # or any port</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="dt">reload </span><span class="ot">=</span><span class="st"> </span><span class="kw">false</span></span></code></pre></div>
<h4 data-number="1.9.1.3" id="port-configuration-logic"><span
class="header-section-number">1.9.1.3</span> Port Configuration
Logic</h4>
<ol type="1">
<li>If <code>app-config.prod.ini</code> exists → uses production
config</li>
<li>Otherwise → uses <code>app-config.ini</code> (development)</li>
<li>GenHook automatically detects and uses the appropriate config</li>
<li><strong>No code modification ever required</strong></li>
</ol>
<h4 data-number="1.9.1.4" id="endpoint-access"><span
class="header-section-number">1.9.1.4</span> Endpoint Access</h4>
<ul>
<li><strong>API Endpoints</strong>: <code>/webhook/{service}</code> for
webhook reception</li>
<li><strong>Web Interface</strong>: <code>/config</code> for
configuration management</li>
<li><strong>Health Check</strong>: <code>/health</code> for
monitoring</li>
<li><strong>API Documentation</strong>: <code>/docs</code> for FastAPI
swagger docs</li>
</ul>
<h3 data-number="1.9.2" id="aws-deployment-considerations"><span
class="header-section-number">1.9.2</span> AWS Deployment
Considerations</h3>
<ul>
<li><strong>Application Load Balancer</strong>: Route traffic to GenHook
instances</li>
<li><strong>Security Groups</strong>: Allow inbound 8000 from ALB,
outbound 443 to SL1</li>
<li><strong>Auto Scaling</strong>: Scale based on webhook volume
metrics</li>
<li><strong>CloudWatch</strong>: Monitor application logs and
metrics</li>
<li><strong>Secrets Manager</strong>: Store SL1 credentials
securely</li>
</ul>
<h3 data-number="1.9.3" id="reverse-proxy-configuration-nginx"><span
class="header-section-number">1.9.3</span> Reverse Proxy Configuration
(nginx)</h3>
<pre class="nginx"><code>server {
    listen 443 ssl;
    server_name your-genhook-domain.com;
    
    ssl_certificate /path/to/ssl/cert.crt;
    ssl_certificate_key /path/to/ssl/private.key;
    
    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}</code></pre>
<h3 data-number="1.9.4" id="environment-variables-for-production"><span
class="header-section-number">1.9.4</span> Environment Variables for
Production</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set in production environment</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="va">GENHOOK_ENV</span><span class="op">=</span>production</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="va">SL1_API_URL</span><span class="op">=</span>https://your-sl1-instance.com/api/alert</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="va">SL1_USERNAME</span><span class="op">=</span>your_sl1_user</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="va">SL1_PASSWORD</span><span class="op">=</span>your_sl1_password</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="va">WEB_INTERFACE_ENABLED</span><span class="op">=</span>true</span></code></pre></div>
<h3 data-number="1.9.5" id="configuration-files-for-production"><span
class="header-section-number">1.9.5</span> Configuration Files for
Production</h3>
<ul>
<li>Ensure <code>backend/config/webhook-config.ini</code> contains your
webhook configurations</li>
<li>Configuration changes take effect immediately through dynamic
loading</li>
<li>Backup configurations are stored in
<code>backend/config/backups/</code></li>
</ul>
<h3 data-number="1.9.6" id="security-checklist"><span
class="header-section-number">1.9.6</span> Security Checklist</h3>
<ul>
<li>✅ HTTPS enabled for all webhook endpoints</li>
<li>✅ Web interface accessible only from authorized networks</li>
<li>✅ SL1 credentials stored securely (not in code)</li>
<li>✅ Webhook signature verification enabled where possible</li>
<li>✅ Rate limiting configured for webhook endpoints</li>
<li>✅ Regular backup of configuration files</li>
</ul>
<h2 data-number="1.10" id="security-performance"><span
class="header-section-number">1.10</span> Security &amp;
Performance</h2>
<h3 data-number="1.10.1" id="security-considerations-1"><span
class="header-section-number">1.10.1</span> Security Considerations</h3>
<ul>
<li><strong>Webhook Verification</strong>: Validate signatures from
webhook providers</li>
<li><strong>Rate Limiting</strong>: Prevent spam/DoS attacks</li>
<li><strong>Input Validation</strong>: Sanitize all webhook
payloads</li>
<li><strong>Authentication</strong>: Secure SL1 API credentials
(username/password for HTTP Basic Auth)</li>
<li><strong>HTTPS Only</strong>: Encrypt all webhook traffic</li>
</ul>
<h3 data-number="1.10.2" id="error-handling-strategy"><span
class="header-section-number">1.10.2</span> Error Handling Strategy</h3>
<ul>
<li><strong>Graceful Degradation</strong>: Continue processing other
webhooks</li>
<li><strong>Retry Logic</strong>: Exponential backoff for failed API
calls</li>
<li><strong>Dead Letter Queue</strong>: Store unprocessable
webhooks</li>
<li><strong>Circuit Breaker</strong>: Protect against downstream
failures</li>
<li><strong>Timeout Handling</strong>: Prevent hung threads</li>
</ul>
<h3 data-number="1.10.3" id="performance-optimization"><span
class="header-section-number">1.10.3</span> Performance
Optimization</h3>
<ul>
<li><strong>Connection Pooling</strong>: Reuse HTTP connections to
SL1</li>
<li><strong>Batch Processing</strong>: Group multiple events when
possible</li>
<li><strong>Caching</strong>: Cache configuration and templates</li>
<li><strong>Metrics</strong>: Monitor processing times and
throughput</li>
<li><strong>Profiling</strong>: Identify bottlenecks in production</li>
</ul>
<h3 data-number="1.10.4" id="monitoring-points"><span
class="header-section-number">1.10.4</span> Monitoring Points</h3>
<ul>
<li><strong>Webhook Ingestion Rate</strong>: Webhooks received per
second</li>
<li><strong>Processing Latency</strong>: Time from receipt to SL1 API
call</li>
<li><strong>Error Rates</strong>: Failed processing percentage</li>
<li><strong>Queue Depth</strong>: Backlog of pending webhooks</li>
<li><strong>Thread Utilization</strong>: Active vs idle threads</li>
<li><strong>SL1 API Response Times</strong>: Downstream service
health</li>
</ul>
<h3 data-number="1.10.5" id="key-metrics-to-track"><span
class="header-section-number">1.10.5</span> Key Metrics to Track</h3>
<ul>
<li><strong>Webhook Reception Rate</strong>: webhooks/second by
type</li>
<li><strong>Processing Latency</strong>: 95th percentile processing
time</li>
<li><strong>Error Rate</strong>: Failed webhooks percentage</li>
<li><strong>SL1 API Success Rate</strong>: Successful API calls
percentage</li>
<li><strong>Queue Depth</strong>: Current backlog size</li>
<li><strong>Thread Pool Utilization</strong>: Active threads / total
threads</li>
</ul>
<h2 data-number="1.11" id="web-configuration-interface-plan"><span
class="header-section-number">1.11</span> Web Configuration Interface
Plan</h2>
<h3 data-number="1.11.1" id="overview-2"><span
class="header-section-number">1.11.1</span> Overview</h3>
<p>A comprehensive web-based interface for configuring GenHook webhooks
without manual file editing.</p>
<h3 data-number="1.11.2" id="key-features-2"><span
class="header-section-number">1.11.2</span> Key Features</h3>
<ul>
<li><strong>Visual Field Selection</strong>: Interactive tree view of
JSON payload fields with hierarchical display</li>
<li><strong>SL1 Alignment Configuration</strong>: Modal interface for
Organization/Device ID selection</li>
<li><strong>Live Preview</strong>: Real-time message generation preview
with actual payload testing</li>
<li><strong>Template Builder</strong>: Guided template creation with
variable suggestions</li>
<li><strong>Tokenized Security</strong>: Unique tokens per webhook
configuration for enhanced security</li>
<li><strong>Configuration Management</strong>: Safe config updates with
automatic backup and rollback</li>
<li><strong>Dynamic Loading</strong>: Configuration changes take effect
immediately without service restarts</li>
<li><strong>Copy Functions</strong>: Dedicated buttons for copying
webhook URLs and tokens</li>
<li><strong>Automatic Cleanup</strong>: Remove webhook log directories
when deleting configurations</li>
</ul>
<h3 data-number="1.11.3" id="architecture-1"><span
class="header-section-number">1.11.3</span> Architecture</h3>
<ul>
<li><strong>Framework</strong>: FastAPI + Jinja2 templates + Vanilla
JavaScript</li>
<li><strong>Configuration-Driven</strong>: All settings externalized to
<code>web-config.ini</code></li>
<li><strong>Security</strong>: IP-based access control and input
validation</li>
<li><strong>File Operations</strong>: Atomic config updates with backup
mechanisms</li>
</ul>
<h3 data-number="1.11.4" id="implementation-structure"><span
class="header-section-number">1.11.4</span> Implementation
Structure</h3>
<pre><code>backend/
├── app/
│   ├── web/                    # Web interface module
│   │   ├── routes.py          # Web UI routes
│   │   ├── services.py        # Config management logic
│   │   └── models.py          # Pydantic models
│   ├── templates/             # Jinja2 HTML templates
│   ├── static/               # CSS, JS, assets
├── config/
│   └── web-config.ini        # Web interface configuration</code></pre>
<h3 data-number="1.11.5" id="user-workflow"><span
class="header-section-number">1.11.5</span> User Workflow</h3>
<ol type="1">
<li>Access web interface at <code>/config</code></li>
<li>Paste JSON payload from webhook source</li>
<li>Select fields using interactive tree interface</li>
<li>Build message template with live preview</li>
<li>Save configuration (takes effect immediately)</li>
<li>Test with actual webhook</li>
</ol>
<h3 data-number="1.11.6" id="documentation"><span
class="header-section-number">1.11.6</span> Documentation</h3>
<ul>
<li><strong>Full Implementation Plan</strong>:
<code>WEB_INTERFACE_PLAN.md</code></li>
<li><strong>Branch Strategy</strong>:
<code>feature/web-config-interface</code></li>
<li><strong>Status</strong>: Ready for implementation</li>
</ul>
<h3 data-number="1.11.7" id="benefits"><span
class="header-section-number">1.11.7</span> Benefits</h3>
<ul>
<li><strong>User-Friendly</strong>: No technical knowledge required</li>
<li><strong>Error Reduction</strong>: Visual field selection prevents
mistakes</li>
<li><strong>Fast Onboarding</strong>: Quick setup of new webhook
sources</li>
<li><strong>Safe Deployment</strong>: Backup and rollback
capabilities</li>
</ul>
<h4 data-number="1.11.7.1"
id="recent-enhancement-super-easy-recent-payload-loading"><span
class="header-section-number">1.11.7.1</span> Recent Enhancement: Super
Easy Recent Payload Loading 🚀</h4>
<p>The web interface now includes enhanced recent payload loading with:
- <strong>Smart Dropdowns</strong>: Auto-populated webhook types and
recent payloads - <strong>Edit Mode Integration</strong>: When editing
configs, webhook type auto-selects and loads recent payloads -
<strong>Visual Cards</strong>: Green for recent payload loading, blue
for manual input - <strong>1-Click Loading</strong>: Load real webhook
data directly into test fields - <strong>Both Modes</strong>: Available
in both new configuration creation and edit modes</p>
<h2 data-number="1.12" id="webhook-payload-logging"><span
class="header-section-number">1.12</span> Webhook Payload Logging</h2>
<h3 data-number="1.12.1" id="overview-3"><span
class="header-section-number">1.12.1</span> Overview</h3>
<p>GenHook automatically logs all received webhook payloads for
debugging and template development. Each webhook type gets its own
directory with rotating log files to prevent disk space issues.</p>
<h3 data-number="1.12.2" id="features"><span
class="header-section-number">1.12.2</span> Features</h3>
<ul>
<li><strong>Automatic Directory Creation</strong>: New webhook types
automatically get log directories</li>
<li><strong>Rotating Logs</strong>: Prevents disk space issues (10MB per
file, 5 backups)</li>
<li><strong>JSON Format</strong>: Easy to parse and analyze</li>
<li><strong>Web Interface Integration</strong>: Load recent payloads
directly into config interface</li>
<li><strong>Permission Handling</strong>: Graceful handling of
permission issues in production</li>
</ul>
<h3 data-number="1.12.3" id="configuration"><span
class="header-section-number">1.12.3</span> Configuration</h3>
<p>Edit <code>backend/config/app-config.ini</code>:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[webhook_logging]</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="dt">enabled </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="dt">base_directory </span><span class="ot">=</span><span class="st"> logs/webhooks</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="dt">max_bytes </span><span class="ot">=</span><span class="st"> 10485760  # 10MB per file</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="dt">backup_count </span><span class="ot">=</span><span class="st"> 5  # Keep 5 backup files</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="dt">log_file_name </span><span class="ot">=</span><span class="st"> payload.log</span></span></code></pre></div>
<h3 data-number="1.12.4" id="directory-structure"><span
class="header-section-number">1.12.4</span> Directory Structure</h3>
<pre><code>backend/logs/
├── webhooks/
│   ├── github/
│   │   ├── payload.log      # Current log
│   │   ├── payload.log.1    # First backup
│   │   └── payload.log.2    # Second backup
│   ├── stripe/
│   │   └── payload.log
│   └── [auto-created for each webhook type]/</code></pre>
<h3 data-number="1.12.5" id="web-interface-features"><span
class="header-section-number">1.12.5</span> Web Interface Features</h3>
<ul>
<li><strong>Load Recent Payload</strong> section in config interface
(both create and edit modes)</li>
<li><strong>Smart Dropdowns</strong> showing webhook types and last 10
payloads with timestamps<br />
</li>
<li><strong>Auto-populate functionality</strong> in test payload
fields</li>
<li><strong>Edit Mode Integration</strong> with auto-populated webhook
type selection</li>
<li><strong>Visual Cards</strong> - Green for recent payloads, blue for
manual input</li>
<li><strong>API endpoints</strong>:
<ul>
<li><code>GET /api/webhook-logs/{webhook_type}/recent?limit=10</code> -
Get recent payloads</li>
<li><code>GET /api/webhook-logs/types</code> - Get available webhook
types</li>
</ul></li>
</ul>
<h3 data-number="1.12.6" id="production-deployment-aws"><span
class="header-section-number">1.12.6</span> Production Deployment
(AWS)</h3>
<h4 data-number="1.12.6.1" id="initial-setup-one-time"><span
class="header-section-number">1.12.6.1</span> Initial Setup (One
Time)</h4>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Switch to genhook user</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> su <span class="at">-</span> genhook</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /opt/genhook</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create logs directory</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> /opt/genhook/backend/logs/webhooks</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> 755 /opt/genhook/backend/logs</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> 755 /opt/genhook/backend/logs/webhooks</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Mark webhook-config.ini to ignore future changes</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> update-index <span class="at">--skip-worktree</span> backend/config/webhook-config.ini</span></code></pre></div>
<h4 data-number="1.12.6.2" id="deploying-updates"><span
class="header-section-number">1.12.6.2</span> Deploying Updates</h4>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># As genhook user</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> su <span class="at">-</span> genhook</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /opt/genhook</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Stash local changes</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> stash save <span class="st">&quot;Production config - </span><span class="va">$(</span><span class="fu">date</span> +%Y%m%d_%H%M%S<span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Pull updates</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> pull origin main  <span class="co"># or feature branch</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Restore local changes</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> stash pop</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Exit and restart</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> supervisorctl restart genhook</span></code></pre></div>
<h3 data-number="1.12.7" id="production-notes"><span
class="header-section-number">1.12.7</span> Production Notes</h3>
<ul>
<li>Service runs as <code>genhook</code> user via supervisor</li>
<li>Logs directory:
<code>/opt/genhook/backend/logs/webhooks/</code></li>
<li>Permissions: 755 for directories, 644 for log files</li>
<li>Owner: genhook:genhook</li>
<li>Automatic rotation prevents disk space issues</li>
</ul>
<h3 data-number="1.12.8" id="troubleshooting"><span
class="header-section-number">1.12.8</span> Troubleshooting</h3>
<h4 data-number="1.12.8.1" id="permission-issues"><span
class="header-section-number">1.12.8.1</span> Permission Issues</h4>
<div class="sourceCode" id="cb19"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check service user</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ps</span> aux <span class="kw">|</span> <span class="fu">grep</span> genhook</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fix log directory permissions</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chown <span class="at">-R</span> genhook:genhook /opt/genhook/backend/logs</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chmod <span class="at">-R</span> 755 /opt/genhook/backend/logs</span></code></pre></div>
<h4 data-number="1.12.8.2" id="viewing-logs"><span
class="header-section-number">1.12.8.2</span> Viewing Logs</h4>
<div class="sourceCode" id="cb20"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View recent payloads for a webhook type</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook tail <span class="at">-f</span> /opt/genhook/backend/logs/webhooks/github/payload.log</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse JSON logs</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook cat /opt/genhook/backend/logs/webhooks/github/payload.log <span class="kw">|</span> <span class="ex">jq</span> <span class="st">&#39;.&#39;</span></span></code></pre></div>
<h4 data-number="1.12.8.3" id="log-rotation"><span
class="header-section-number">1.12.8.3</span> Log Rotation</h4>
<ul>
<li>Automatic rotation at 10MB</li>
<li>Keeps 5 backup files (payload.log.1 through payload.log.5)</li>
<li>Oldest logs are deleted automatically</li>
</ul>
<h3 data-number="1.12.9" id="log-format"><span
class="header-section-number">1.12.9</span> Log Format</h3>
<p>Each log entry (one per line for easy parsing):</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="st">&quot;2025-08-10T12:00:00Z&quot;</span><span class="fu">,</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;webhook_type&quot;</span><span class="fu">:</span> <span class="st">&quot;github&quot;</span><span class="fu">,</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;payload&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="er">...actual</span> <span class="er">webhook</span> <span class="er">payload...</span><span class="fu">},</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;source_ip&quot;</span><span class="fu">:</span> <span class="st">&quot;192.168.1.1&quot;</span><span class="fu">,</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;user_agent&quot;</span><span class="fu">:</span> <span class="st">&quot;GitHub-Hookshot/12345&quot;</span><span class="fu">,</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;processing_status&quot;</span><span class="fu">:</span> <span class="st">&quot;success&quot;</span><span class="fu">,</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;generated_message&quot;</span><span class="fu">:</span> <span class="st">&quot;GitHub push on repo...&quot;</span><span class="fu">,</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;content_length&quot;</span><span class="fu">:</span> <span class="st">&quot;1234&quot;</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="1.12.10" id="api-endpoints-1"><span
class="header-section-number">1.12.10</span> API Endpoints</h3>
<ul>
<li><code>GET /api/webhook-logs/{webhook_type}/recent?limit=10</code> -
Get recent payloads</li>
<li><code>GET /api/webhook-logs/types</code> - Get list of webhook types
with logs</li>
</ul>
<h3 data-number="1.12.11" id="benefits-1"><span
class="header-section-number">1.12.11</span> Benefits</h3>
<ul>
<li><strong>Debugging</strong>: See actual payloads when webhooks fail
or produce unexpected output</li>
<li><strong>Template Development</strong>: Use real payloads to
create/refine webhook configurations with 1-click loading</li>
<li><strong>Audit Trail</strong>: Track what webhooks were received and
when with full metadata</li>
<li><strong>Super Easy Configuration</strong>: Load recent payloads in
both create and edit modes</li>
<li><strong>Smart Edit Mode</strong>: Auto-populated webhook type with
instant access to recent payloads<br />
</li>
<li><strong>Visual Interface</strong>: Color-coded cards (green for
logs, blue for manual input)</li>
<li><strong>Disk Management</strong>: Automatic rotation prevents
runaway disk usage</li>
</ul>
<h3 data-number="1.12.12" id="enhanced-user-workflow"><span
class="header-section-number">1.12.12</span> Enhanced User Workflow</h3>
<ol type="1">
<li><strong>Creating New Config</strong>: Select webhook type → Load
recent payload → Build template</li>
<li><strong>Editing Existing Config</strong>: Click edit → Webhook type
auto-selected → Load recent payloads → Test changes</li>
<li><strong>Real-time Testing</strong>: Load actual webhook data to test
template changes instantly</li>
<li><strong>No Manual Copy/Paste</strong>: Direct integration between
logs and configuration interface</li>
</ol>
<h1 data-number="2" id="genhook-production-deployment-guide"><span
class="header-section-number">2</span> GenHook Production Deployment
Guide</h1>
<h2 data-number="2.1" id="overview-4"><span
class="header-section-number">2.1</span> Overview</h2>
<p>This guide provides comprehensive instructions for deploying GenHook
to production with the web configuration interface. GenHook is designed
to be production-ready with proper security, monitoring, and scalability
considerations.</p>
<h2 data-number="2.2" id="architecture-overview"><span
class="header-section-number">2.2</span> Architecture Overview</h2>
<pre><code>Internet → Load Balancer (443) → Reverse Proxy → GenHook (8000) → SL1 API
                                       ↓
                               Web Interface (/config)</code></pre>
<h2 data-number="2.3" id="pre-production-checklist"><span
class="header-section-number">2.3</span> Pre-Production Checklist</h2>
<h3 data-number="2.3.1" id="code-readiness"><span
class="header-section-number">2.3.1</span> ✅ Code Readiness</h3>
<ul class="task-list">
<li><label><input type="checkbox" />All debug statements
removed</label></li>
<li><label><input type="checkbox" />Error handling
implemented</label></li>
<li><label><input type="checkbox" />Configuration
externalized</label></li>
<li><label><input type="checkbox" />Logging configured</label></li>
<li><label><input type="checkbox" />Health checks working</label></li>
</ul>
<h3 data-number="2.3.2" id="security"><span
class="header-section-number">2.3.2</span> ✅ Security</h3>
<ul class="task-list">
<li><label><input type="checkbox" />HTTPS/SSL certificates
configured</label></li>
<li><label><input type="checkbox" />Webhook signature verification
enabled</label></li>
<li><label><input type="checkbox" />Rate limiting
implemented</label></li>
<li><label><input type="checkbox" />Access controls for web
interface</label></li>
<li><label><input type="checkbox" />SL1 credentials secured</label></li>
</ul>
<h3 data-number="2.3.3" id="configuration-1"><span
class="header-section-number">2.3.3</span> ✅ Configuration</h3>
<ul class="task-list">
<li><label><input type="checkbox" />Production webhook configurations
tested</label></li>
<li><label><input type="checkbox" />SL1 API connectivity
verified</label></li>
<li><label><input type="checkbox" />Web interface configurations
validated</label></li>
<li><label><input type="checkbox" />Backup strategy
implemented</label></li>
</ul>
<h2 data-number="2.4" id="port-configuration-strategy"><span
class="header-section-number">2.4</span> Port Configuration
Strategy</h2>
<p><strong>GenHook uses a configuration-driven approach - no code
changes required!</strong></p>
<h3 data-number="2.4.1" id="configuration-files"><span
class="header-section-number">2.4.1</span> Configuration Files</h3>
<ul>
<li><strong>Development</strong>:
<code>backend/config/app-config.ini</code> (default port 8000)</li>
<li><strong>Production</strong>:
<code>backend/config/app-config.prod.ini</code> (automatically detected
if exists)</li>
</ul>
<h3 data-number="2.4.2" id="port-configuration-options"><span
class="header-section-number">2.4.2</span> Port Configuration
Options</h3>
<h4 data-number="2.4.2.1" id="option-1-direct-https-port-443"><span
class="header-section-number">2.4.2.1</span> Option 1: Direct HTTPS
(Port 443)</h4>
<p>Create production config for direct HTTPS:</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># backend/config/app-config.prod.ini</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[server]</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="dt">host </span><span class="ot">=</span><span class="st"> 0.0.0.0</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="dt">port </span><span class="ot">=</span><span class="st"> </span><span class="dv">443</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="dt">reload </span><span class="ot">=</span><span class="st"> </span><span class="kw">false</span></span></code></pre></div>
<p><strong>Benefits</strong>: Direct HTTPS, no reverse proxy needed
<strong>Requirements</strong>: SSL certificates, root privileges for
port 443</p>
<h4 data-number="2.4.2.2" id="option-2-reverse-proxy-recommended"><span
class="header-section-number">2.4.2.2</span> Option 2: Reverse Proxy
(Recommended)</h4>
<p>Keep default port 8000, use nginx/Apache for HTTPS:</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># backend/config/app-config.ini (unchanged)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[server]</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="dt">host </span><span class="ot">=</span><span class="st"> 0.0.0.0</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="dt">port </span><span class="ot">=</span><span class="st"> </span><span class="dv">8000</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="dt">reload </span><span class="ot">=</span><span class="st"> </span><span class="kw">false</span></span></code></pre></div>
<p><strong>Benefits</strong>: Better security, easier SSL management,
load balancing <strong>Setup</strong>: Configure nginx/Apache to proxy
443 → 8000</p>
<h4 data-number="2.4.2.3" id="option-3-custom-port"><span
class="header-section-number">2.4.2.3</span> Option 3: Custom Port</h4>
<p>Use any available port:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># backend/config/app-config.prod.ini</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[server]</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="dt">host </span><span class="ot">=</span><span class="st"> 0.0.0.0</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="dt">port </span><span class="ot">=</span><span class="st"> 9000  # or any port</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="dt">reload </span><span class="ot">=</span><span class="st"> </span><span class="kw">false</span></span></code></pre></div>
<h3 data-number="2.4.3" id="configuration-priority"><span
class="header-section-number">2.4.3</span> Configuration Priority</h3>
<ol type="1">
<li>If <code>app-config.prod.ini</code> exists → production config
used</li>
<li>Otherwise → <code>app-config.ini</code> (development) used</li>
<li><strong>No code modification ever required</strong></li>
</ol>
<h2 data-number="2.5" id="deployment-options"><span
class="header-section-number">2.5</span> Deployment Options</h2>
<h3 data-number="2.5.1"
id="option-1-aws-ec2-with-application-load-balancer-recommended"><span
class="header-section-number">2.5.1</span> Option 1: AWS EC2 with
Application Load Balancer (Recommended)</h3>
<h4 data-number="2.5.1.1" id="infrastructure-setup"><span
class="header-section-number">2.5.1.1</span> Infrastructure Setup</h4>
<ol type="1">
<li><p><strong>EC2 Instance Configuration</strong></p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Instance Type: t3.medium (2 vCPU, 4GB RAM) for moderate load</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Instance Type: c5.large (2 vCPU, 4GB RAM) for high load</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># OS: Amazon Linux 2 or Ubuntu 20.04 LTS</span></span></code></pre></div></li>
<li><p><strong>Security Group Configuration</strong></p>
<pre><code>Inbound Rules:
- Port 22 (SSH): Your IP only
- Port 8000: ALB Security Group only
- Port 443: ALB Security Group only (if using direct SSL)

Outbound Rules:
- Port 443 (HTTPS): SL1 API endpoints
- Port 80/443: Package updates</code></pre></li>
<li><p><strong>Application Load Balancer Setup</strong></p>
<pre><code>Target Group: GenHook instances on port 8000
Health Check: /health
SSL Certificate: AWS Certificate Manager</code></pre></li>
</ol>
<h4 data-number="2.5.1.2" id="installation-script"><span
class="header-section-number">2.5.1.2</span> Installation Script</h4>
<div class="sourceCode" id="cb29"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># GenHook Production Installation Script</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Update system</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum update <span class="at">-y</span>  <span class="co"># Amazon Linux</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># sudo apt update &amp;&amp; sudo apt upgrade -y  # Ubuntu</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Python 3.9+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install python3 python3-pip git <span class="at">-y</span>  <span class="co"># Amazon Linux</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="co"># sudo apt install python3 python3-pip git -y  # Ubuntu</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create genhook user</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> useradd <span class="at">-m</span> <span class="at">-s</span> /bin/bash genhook</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> mkdir <span class="at">-p</span> /opt/genhook</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> chown genhook:genhook /opt/genhook</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Clone repository</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook git clone https://github.com/rudipoppes/GenHook.git /opt/genhook</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /opt/genhook</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Create virtual environment</span></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook python3 <span class="at">-m</span> venv venv</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook ./venv/bin/pip install <span class="at">-r</span> backend/requirements.txt</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create production configuration</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook cp backend/config/app-config.ini.example backend/config/app-config.ini</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook cp backend/config/web-config.ini.example backend/config/web-config.ini</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Configure port for production (IMPORTANT: Configuration-driven approach)</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1: Direct HTTPS on port 443 (requires SSL certs)</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook cp backend/config/app-config.prod.ini.example backend/config/app-config.prod.ini</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook sed <span class="at">-i</span> <span class="st">&#39;s/port = 8000/port = 443/&#39;</span> backend/config/app-config.prod.ini</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2: Keep port 8000 for reverse proxy (recommended)</span></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a><span class="co"># No changes needed - use default port 8000 with nginx/ALB handling HTTPS</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Create systemd service</span></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> tee /etc/systemd/system/genhook.service <span class="op">&gt;</span> /dev/null <span class="op">&lt;&lt;EOF</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a><span class="st">[Unit]</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a><span class="st">Description=GenHook Webhook Receiver</span></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a><span class="st">After=network.target</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a><span class="st">[Service]</span></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a><span class="st">Type=simple</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a><span class="st">User=genhook</span></span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a><span class="st">Group=genhook</span></span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a><span class="st">WorkingDirectory=/opt/genhook/backend</span></span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a><span class="st">Environment=PYTHONPATH=/opt/genhook/backend</span></span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a><span class="st">ExecStart=/opt/genhook/venv/bin/python main.py</span></span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a><span class="st">Restart=always</span></span>
<span id="cb29-51"><a href="#cb29-51" aria-hidden="true" tabindex="-1"></a><span class="st">RestartSec=3</span></span>
<span id="cb29-52"><a href="#cb29-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-53"><a href="#cb29-53" aria-hidden="true" tabindex="-1"></a><span class="st"># Environment variables</span></span>
<span id="cb29-54"><a href="#cb29-54" aria-hidden="true" tabindex="-1"></a><span class="st">Environment=&quot;SL1_API_URL=https://your-sl1-instance.com/api/alert&quot;</span></span>
<span id="cb29-55"><a href="#cb29-55" aria-hidden="true" tabindex="-1"></a><span class="st">Environment=&quot;SL1_USERNAME=your_sl1_user&quot;</span></span>
<span id="cb29-56"><a href="#cb29-56" aria-hidden="true" tabindex="-1"></a><span class="st">Environment=&quot;SL1_PASSWORD=your_sl1_password&quot;</span></span>
<span id="cb29-57"><a href="#cb29-57" aria-hidden="true" tabindex="-1"></a><span class="st">Environment=&quot;WEB_INTERFACE_ENABLED=true&quot;</span></span>
<span id="cb29-58"><a href="#cb29-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-59"><a href="#cb29-59" aria-hidden="true" tabindex="-1"></a><span class="st">[Install]</span></span>
<span id="cb29-60"><a href="#cb29-60" aria-hidden="true" tabindex="-1"></a><span class="st">WantedBy=multi-user.target</span></span>
<span id="cb29-61"><a href="#cb29-61" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb29-62"><a href="#cb29-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-63"><a href="#cb29-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Start and enable service</span></span>
<span id="cb29-64"><a href="#cb29-64" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl daemon-reload</span>
<span id="cb29-65"><a href="#cb29-65" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable genhook</span>
<span id="cb29-66"><a href="#cb29-66" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start genhook</span></code></pre></div>
<h4 data-number="2.5.1.3" id="nginx-reverse-proxy-configuration"><span
class="header-section-number">2.5.1.3</span> Nginx Reverse Proxy
Configuration</h4>
<div class="sourceCode" id="cb30"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Install Nginx</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> yum install nginx <span class="at">-y</span>  <span class="co"># Amazon Linux</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># sudo apt install nginx -y  # Ubuntu</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create configuration</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> tee /etc/nginx/sites-available/genhook <span class="op">&gt;</span> /dev/null <span class="op">&lt;&lt;EOF</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="st">server {</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="st">    listen 80;</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="st">    server_name your-genhook-domain.com;</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="st">    return 301 https://</span><span class="dt">\$</span><span class="st">server_name</span><span class="dt">\$</span><span class="st">request_uri;</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="st">server {</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="st">    listen 443 ssl http2;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="st">    server_name your-genhook-domain.com;</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="st">    # SSL Configuration</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="st">    ssl_certificate /etc/ssl/certs/genhook.crt;</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="st">    ssl_certificate_key /etc/ssl/private/genhook.key;</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="st">    ssl_protocols TLSv1.2 TLSv1.3;</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="st">    ssl_ciphers HIGH:!aNULL:!MD5;</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a><span class="st">    # Security Headers</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a><span class="st">    add_header X-Frame-Options DENY;</span></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a><span class="st">    add_header X-Content-Type-Options nosniff;</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="st">    add_header X-XSS-Protection &quot;1; mode=block&quot;;</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a><span class="st">    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot; always;</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a><span class="st">    # Webhook endpoints (public)</span></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a><span class="st">    location /webhook/ {</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_pass http://localhost:8000;</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_set_header Host </span><span class="dt">\$</span><span class="st">host;</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_set_header X-Real-IP </span><span class="dt">\$</span><span class="st">remote_addr;</span></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_set_header X-Forwarded-For </span><span class="dt">\$</span><span class="st">proxy_add_x_forwarded_for;</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_set_header X-Forwarded-Proto </span><span class="dt">\$</span><span class="st">scheme;</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a><span class="st">        </span></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a><span class="st">        # Rate limiting</span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a><span class="st">        limit_req zone=webhook_limit burst=10 nodelay;</span></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a><span class="st">    # Health check (public)</span></span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a><span class="st">    location /health {</span></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_pass http://localhost:8000;</span></span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a><span class="st">        access_log off;</span></span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a><span class="st">    # Web interface (restrict access)</span></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a><span class="st">    location /config {</span></span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a><span class="st">        # Restrict to specific IPs</span></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a><span class="st">        allow 10.0.0.0/8;    # Private networks</span></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a><span class="st">        allow 192.168.0.0/16;</span></span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a><span class="st">        deny all;</span></span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_pass http://localhost:8000;</span></span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_set_header Host </span><span class="dt">\$</span><span class="st">host;</span></span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_set_header X-Real-IP </span><span class="dt">\$</span><span class="st">remote_addr;</span></span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_set_header X-Forwarded-For </span><span class="dt">\$</span><span class="st">proxy_add_x_forwarded_for;</span></span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_set_header X-Forwarded-Proto </span><span class="dt">\$</span><span class="st">scheme;</span></span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-61"><a href="#cb30-61" aria-hidden="true" tabindex="-1"></a><span class="st">    # Static files for web interface</span></span>
<span id="cb30-62"><a href="#cb30-62" aria-hidden="true" tabindex="-1"></a><span class="st">    location /static/ {</span></span>
<span id="cb30-63"><a href="#cb30-63" aria-hidden="true" tabindex="-1"></a><span class="st">        # Same IP restrictions as /config</span></span>
<span id="cb30-64"><a href="#cb30-64" aria-hidden="true" tabindex="-1"></a><span class="st">        allow 10.0.0.0/8;</span></span>
<span id="cb30-65"><a href="#cb30-65" aria-hidden="true" tabindex="-1"></a><span class="st">        allow 192.168.0.0/16;</span></span>
<span id="cb30-66"><a href="#cb30-66" aria-hidden="true" tabindex="-1"></a><span class="st">        deny all;</span></span>
<span id="cb30-67"><a href="#cb30-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-68"><a href="#cb30-68" aria-hidden="true" tabindex="-1"></a><span class="st">        proxy_pass http://localhost:8000;</span></span>
<span id="cb30-69"><a href="#cb30-69" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb30-70"><a href="#cb30-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-71"><a href="#cb30-71" aria-hidden="true" tabindex="-1"></a><span class="st">    # Block other access</span></span>
<span id="cb30-72"><a href="#cb30-72" aria-hidden="true" tabindex="-1"></a><span class="st">    location / {</span></span>
<span id="cb30-73"><a href="#cb30-73" aria-hidden="true" tabindex="-1"></a><span class="st">        return 404;</span></span>
<span id="cb30-74"><a href="#cb30-74" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb30-75"><a href="#cb30-75" aria-hidden="true" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb30-76"><a href="#cb30-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-77"><a href="#cb30-77" aria-hidden="true" tabindex="-1"></a><span class="st"># Rate limiting zone</span></span>
<span id="cb30-78"><a href="#cb30-78" aria-hidden="true" tabindex="-1"></a><span class="st">http {</span></span>
<span id="cb30-79"><a href="#cb30-79" aria-hidden="true" tabindex="-1"></a><span class="st">    limit_req_zone </span><span class="dt">\$</span><span class="st">binary_remote_addr zone=webhook_limit:10m rate=10r/s;</span></span>
<span id="cb30-80"><a href="#cb30-80" aria-hidden="true" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb30-81"><a href="#cb30-81" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb30-82"><a href="#cb30-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-83"><a href="#cb30-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Enable site</span></span>
<span id="cb30-84"><a href="#cb30-84" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /etc/nginx/sites-available/genhook /etc/nginx/sites-enabled/</span>
<span id="cb30-85"><a href="#cb30-85" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nginx <span class="at">-t</span></span>
<span id="cb30-86"><a href="#cb30-86" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable nginx</span>
<span id="cb30-87"><a href="#cb30-87" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart nginx</span></code></pre></div>
<h3 data-number="2.5.2" id="option-2-docker-deployment"><span
class="header-section-number">2.5.2</span> Option 2: Docker
Deployment</h3>
<h4 data-number="2.5.2.1" id="dockerfile"><span
class="header-section-number">2.5.2.1</span> Dockerfile</h4>
<div class="sourceCode" id="cb31"><pre
class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> python:3.9-slim</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Install system dependencies</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">apt-get</span> update <span class="kw">&amp;&amp;</span> <span class="ex">apt-get</span> install <span class="at">-y</span> <span class="dt">\</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    git <span class="dt">\</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&amp;&amp;</span> <span class="fu">rm</span> <span class="at">-rf</span> /var/lib/apt/lists/<span class="pp">*</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create app user</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">useradd</span> <span class="at">-m</span> <span class="at">-s</span> /bin/bash genhook</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Set working directory</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="kw">WORKDIR</span> /app</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy requirements first for caching</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> backend/requirements.txt .</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">pip</span> install <span class="at">--no-cache-dir</span> <span class="at">-r</span> requirements.txt</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Copy application code</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="kw">COPY</span> backend/ .</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Set ownership</span></span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="kw">RUN</span> <span class="fu">chown</span> <span class="at">-R</span> genhook:genhook /app</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="kw">USER</span> genhook</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Expose port</span></span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPOSE</span> 8000</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Health check</span></span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a><span class="kw">HEALTHCHECK</span> <span class="op">--interval=30s</span> <span class="op">--timeout=10s</span> <span class="op">--start-period=5s</span> <span class="op">--retries=3</span> \</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">CMD</span> <span class="ex">python</span> <span class="at">-c</span> <span class="st">&quot;import requests; requests.get(&#39;http://localhost:8000/health&#39;)&quot;</span></span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Start application</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a><span class="kw">CMD</span> [<span class="st">&quot;python&quot;</span>, <span class="st">&quot;main.py&quot;</span>]</span></code></pre></div>
<h4 data-number="2.5.2.2" id="docker-compose"><span
class="header-section-number">2.5.2.2</span> Docker Compose</h4>
<div class="sourceCode" id="cb32"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;3.8&#39;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="fu">services</span><span class="kw">:</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">genhook</span><span class="kw">:</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">build</span><span class="kw">:</span><span class="at"> .</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;8000:8000&quot;</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">environment</span><span class="kw">:</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> SL1_API_URL=https://your-sl1-instance.com/api/alert</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> SL1_USERNAME=your_sl1_user</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> SL1_PASSWORD=your_sl1_password</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> WEB_INTERFACE_ENABLED=true</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./config:/app/config</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./logs:/app/logs</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> unless-stopped</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">healthcheck</span><span class="kw">:</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">test</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="st">&quot;CMD&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;curl&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;-f&quot;</span><span class="kw">,</span><span class="at"> </span><span class="st">&quot;http://localhost:8000/health&quot;</span><span class="kw">]</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">interval</span><span class="kw">:</span><span class="at"> 30s</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">timeout</span><span class="kw">:</span><span class="at"> 10s</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">retries</span><span class="kw">:</span><span class="at"> </span><span class="dv">3</span></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">nginx</span><span class="kw">:</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">image</span><span class="kw">:</span><span class="at"> nginx:alpine</span></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;443:443&quot;</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="st">&quot;80:80&quot;</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">volumes</span><span class="kw">:</span></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./nginx.conf:/etc/nginx/nginx.conf</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> ./ssl:/etc/ssl</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">depends_on</span><span class="kw">:</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> genhook</span></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">restart</span><span class="kw">:</span><span class="at"> unless-stopped</span></span></code></pre></div>
<h2 data-number="2.6" id="configuration-management-2"><span
class="header-section-number">2.6</span> Configuration Management</h2>
<h3 data-number="2.6.1" id="production-configuration-files"><span
class="header-section-number">2.6.1</span> Production Configuration
Files</h3>
<ol type="1">
<li><p><strong>Backend Configuration
(<code>backend/config/app-config.ini</code>)</strong></p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[server]</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="dt">host </span><span class="ot">=</span><span class="st"> 0.0.0.0</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="dt">port </span><span class="ot">=</span><span class="st"> </span><span class="dv">8000</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="dt">log_level </span><span class="ot">=</span><span class="st"> INFO</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="kw">[sl1]</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="dt">api_url </span><span class="ot">=</span><span class="st"> ${SL1_API_URL}</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="dt">username </span><span class="ot">=</span><span class="st"> ${SL1_USERNAME}</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="dt">password </span><span class="ot">=</span><span class="st"> ${SL1_PASSWORD}</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="dt">timeout </span><span class="ot">=</span><span class="st"> </span><span class="dv">30</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="dt">retry_attempts </span><span class="ot">=</span><span class="st"> </span><span class="dv">3</span></span></code></pre></div></li>
<li><p><strong>Web Interface Configuration
(<code>backend/config/web-config.ini</code>)</strong></p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[ui]</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="dt">enabled </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="dt">max_analysis_depth </span><span class="ot">=</span><span class="st"> </span><span class="dv">3</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="dt">timeout_seconds </span><span class="ot">=</span><span class="st"> </span><span class="dv">30</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="kw">[features]</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="dt">backup_configs </span><span class="ot">=</span><span class="st"> </span><span class="kw">true</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Dynamic configuration loading enabled - no restart needed</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="kw">[paths]</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="dt">config_file_path </span><span class="ot">=</span><span class="st"> config/webhook-config.ini</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="dt">backup_directory </span><span class="ot">=</span><span class="st"> config/backups</span></span></code></pre></div></li>
<li><p><strong>Webhook Configuration
(<code>backend/config/webhook-config.ini</code>)</strong></p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[webhooks]</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Your production webhook configurations</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="dt">github </span><span class="ot">=</span><span class="st"> action,pull_request{title,user{login}},repository{name}::GitHub $action$ on $repository.name$: &quot;$pull_request.title$&quot; by $pull_request.user.login$</span></span></code></pre></div></li>
</ol>
<h2 data-number="2.7" id="monitoring-and-logging"><span
class="header-section-number">2.7</span> Monitoring and Logging</h2>
<h3 data-number="2.7.1" id="cloudwatch-integration-aws"><span
class="header-section-number">2.7.1</span> CloudWatch Integration
(AWS)</h3>
<div class="sourceCode" id="cb36"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to main.py for AWS CloudWatch logging</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> logging</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Configure CloudWatch logging</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>cloudwatch_logs <span class="op">=</span> boto3.client(<span class="st">&#39;logs&#39;</span>)</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> CloudWatchHandler(logging.Handler):</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, log_group, log_stream):</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>()</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.log_group <span class="op">=</span> log_group</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.log_stream <span class="op">=</span> log_stream</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> emit(<span class="va">self</span>, record):</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>        log_entry <span class="op">=</span> {</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;timestamp&#39;</span>: <span class="bu">int</span>(record.created <span class="op">*</span> <span class="dv">1000</span>),</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">&#39;message&#39;</span>: <span class="va">self</span>.<span class="bu">format</span>(record)</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>            cloudwatch_logs.put_log_events(</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>                logGroupName<span class="op">=</span><span class="va">self</span>.log_group,</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>                logStreamName<span class="op">=</span><span class="va">self</span>.log_stream,</span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>                logEvents<span class="op">=</span>[log_entry]</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f&quot;Failed to send log to CloudWatch: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage</span></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> os.getenv(<span class="st">&#39;AWS_CLOUDWATCH_ENABLED&#39;</span>):</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>    cloudwatch_handler <span class="op">=</span> CloudWatchHandler(<span class="st">&#39;genhook&#39;</span>, <span class="st">&#39;application&#39;</span>)</span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>    logger.addHandler(cloudwatch_handler)</span></code></pre></div>
<h3 data-number="2.7.2" id="metrics-and-alerts"><span
class="header-section-number">2.7.2</span> Metrics and Alerts</h3>
<div class="sourceCode" id="cb37"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CloudWatch Custom Metrics</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> cloudwatch put-metric-data <span class="dt">\</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--namespace</span> <span class="st">&quot;GenHook&quot;</span> <span class="dt">\</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--metric-data</span> MetricName=WebhooksProcessed,Value=1,Unit=Count</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co"># CloudWatch Alarms</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> cloudwatch put-metric-alarm <span class="dt">\</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">--alarm-name</span> <span class="st">&quot;GenHook-High-Error-Rate&quot;</span> <span class="dt">\</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--alarm-description</span> <span class="st">&quot;GenHook error rate is too high&quot;</span> <span class="dt">\</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--metric-name</span> ErrorRate <span class="dt">\</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">--namespace</span> GenHook <span class="dt">\</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">--statistic</span> Average <span class="dt">\</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">--period</span> 300 <span class="dt">\</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">--threshold</span> 5.0 <span class="dt">\</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">--comparison-operator</span> GreaterThanThreshold <span class="dt">\</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">--evaluation-periods</span> 2</span></code></pre></div>
<h2 data-number="2.8" id="security-configuration"><span
class="header-section-number">2.8</span> Security Configuration</h2>
<h3 data-number="2.8.1" id="ssltls-setup"><span
class="header-section-number">2.8.1</span> SSL/TLS Setup</h3>
<div class="sourceCode" id="cb38"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate SSL certificate (Let&#39;s Encrypt)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> certbot <span class="at">--nginx</span> <span class="at">-d</span> your-genhook-domain.com</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Or use self-signed for testing</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="ex">openssl</span> req <span class="at">-x509</span> <span class="at">-newkey</span> rsa:4096 <span class="at">-keyout</span> genhook.key <span class="at">-out</span> genhook.crt <span class="at">-days</span> 365 <span class="at">-nodes</span></span></code></pre></div>
<h3 data-number="2.8.2" id="access-control"><span
class="header-section-number">2.8.2</span> Access Control</h3>
<pre class="nginx"><code># IP-based access control in nginx
location /config {
    allow 203.0.113.0/24;  # Your office IP range
    allow 198.51.100.0/24; # Your VPN IP range
    deny all;
}</code></pre>
<h3 data-number="2.8.3" id="webhook-signature-verification"><span
class="header-section-number">2.8.3</span> Webhook Signature
Verification</h3>
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to webhook endpoints for signature verification</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hmac</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> hashlib</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> verify_signature(payload, signature, secret):</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    expected <span class="op">=</span> hmac.new(</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        secret.encode(<span class="st">&#39;utf-8&#39;</span>),</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>        payload,</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>        hashlib.sha256</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    ).hexdigest()</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> hmac.compare_digest(signature, expected)</span></code></pre></div>
<h2 data-number="2.9" id="backup-and-recovery"><span
class="header-section-number">2.9</span> Backup and Recovery</h2>
<h3 data-number="2.9.1" id="automated-backups"><span
class="header-section-number">2.9.1</span> Automated Backups</h3>
<div class="sourceCode" id="cb41"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Backup script for GenHook configurations</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="va">BACKUP_DIR</span><span class="op">=</span><span class="st">&quot;/opt/genhook-backups&quot;</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="va">DATE</span><span class="op">=</span><span class="va">$(</span><span class="fu">date</span> +%Y%m%d_%H%M%S<span class="va">)</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="va">CONFIG_DIR</span><span class="op">=</span><span class="st">&quot;/opt/genhook/backend/config&quot;</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create backup directory</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$BACKUP_DIR</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Backup configurations</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> <span class="at">-czf</span> <span class="va">$BACKUP_DIR</span>/genhook-config-<span class="va">$DATE</span>.tar.gz <span class="at">-C</span> <span class="va">$CONFIG_DIR</span> .</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Upload to S3 (optional)</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> s3 cp <span class="va">$BACKUP_DIR</span>/genhook-config-<span class="va">$DATE</span>.tar.gz s3://your-backup-bucket/genhook/</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep only last 30 days of backups</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="fu">find</span> <span class="va">$BACKUP_DIR</span> <span class="at">-name</span> <span class="st">&quot;genhook-config-*.tar.gz&quot;</span> <span class="at">-mtime</span> +30 <span class="at">-delete</span></span></code></pre></div>
<h3 data-number="2.9.2" id="recovery-procedure"><span
class="header-section-number">2.9.2</span> Recovery Procedure</h3>
<div class="sourceCode" id="cb42"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Stop service</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl stop genhook</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Restore configuration</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /opt/genhook/backend/config</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook tar <span class="at">-xzf</span> /path/to/backup.tar.gz</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Start service</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl start genhook</span></code></pre></div>
<h2 data-number="2.10" id="performance-tuning"><span
class="header-section-number">2.10</span> Performance Tuning</h2>
<h3 data-number="2.10.1" id="application-settings"><span
class="header-section-number">2.10.1</span> Application Settings</h3>
<div class="sourceCode" id="cb43"><pre
class="sourceCode ini"><code class="sourceCode ini"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In app-config.ini</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">[performance]</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="dt">worker_processes </span><span class="ot">=</span><span class="st"> </span><span class="dv">4</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="dt">max_connections </span><span class="ot">=</span><span class="st"> </span><span class="dv">1000</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="dt">keepalive_timeout </span><span class="ot">=</span><span class="st"> </span><span class="dv">65</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="dt">client_max_body_size </span><span class="ot">=</span><span class="st"> 10M</span></span></code></pre></div>
<h3 data-number="2.10.2" id="system-tuning"><span
class="header-section-number">2.10.2</span> System Tuning</h3>
<div class="sourceCode" id="cb44"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Increase file descriptor limits</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;genhook soft nofile 65536&quot;</span> <span class="op">&gt;&gt;</span> /etc/security/limits.conf</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;genhook hard nofile 65536&quot;</span> <span class="op">&gt;&gt;</span> /etc/security/limits.conf</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Tune network settings</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;net.core.somaxconn = 65536&quot;</span> <span class="op">&gt;&gt;</span> /etc/sysctl.conf</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;net.ipv4.tcp_max_syn_backlog = 65536&quot;</span> <span class="op">&gt;&gt;</span> /etc/sysctl.conf</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="ex">sysctl</span> <span class="at">-p</span></span></code></pre></div>
<h2 data-number="2.11" id="troubleshooting-1"><span
class="header-section-number">2.11</span> Troubleshooting</h2>
<h3 data-number="2.11.1" id="common-issues"><span
class="header-section-number">2.11.1</span> Common Issues</h3>
<ol type="1">
<li><p><strong>Port 8000 Already in Use</strong></p>
<div class="sourceCode" id="cb45"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> netstat <span class="at">-tulpn</span> <span class="kw">|</span> <span class="fu">grep</span> :8000</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl stop genhook</span></code></pre></div></li>
<li><p><strong>SL1 API Connection Issues</strong></p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST https://your-sl1-instance.com/api/alert <span class="dt">\</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span> <span class="dt">\</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">-u</span> username:password <span class="dt">\</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">-d</span> <span class="st">&#39;{&quot;message&quot;: &quot;Test&quot;}&#39;</span></span></code></pre></div></li>
<li><p><strong>Web Interface Not Loading</strong></p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> http://localhost:8000/config</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> journalctl <span class="at">-u</span> genhook <span class="at">-f</span></span></code></pre></div></li>
</ol>
<h3 data-number="2.11.2" id="log-analysis"><span
class="header-section-number">2.11.2</span> Log Analysis</h3>
<div class="sourceCode" id="cb48"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check application logs</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> journalctl <span class="at">-u</span> genhook <span class="at">-f</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check nginx logs</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> tail <span class="at">-f</span> /var/log/nginx/access.log</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> tail <span class="at">-f</span> /var/log/nginx/error.log</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Check GenHook application logs</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-f</span> /opt/genhook/logs/application.log</span></code></pre></div>
<h2 data-number="2.12" id="maintenance"><span
class="header-section-number">2.12</span> Maintenance</h2>
<h3 data-number="2.12.1" id="updates"><span
class="header-section-number">2.12.1</span> Updates</h3>
<div class="sourceCode" id="cb49"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Update GenHook</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /opt/genhook</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook git pull origin main</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook ./venv/bin/pip install <span class="at">-r</span> backend/requirements.txt <span class="at">--upgrade</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart genhook</span></code></pre></div>
<h3 data-number="2.12.2" id="health-monitoring"><span
class="header-section-number">2.12.2</span> Health Monitoring</h3>
<div class="sourceCode" id="cb50"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Health check script</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="va">HEALTH_URL</span><span class="op">=</span><span class="st">&quot;http://localhost:8000/health&quot;</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="va">RESPONSE</span><span class="op">=</span><span class="va">$(</span><span class="ex">curl</span> <span class="at">-s</span> <span class="at">-o</span> /dev/null <span class="at">-w</span> <span class="st">&quot;%{http_code}&quot;</span> <span class="va">$HEALTH_URL)</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">[</span> <span class="va">$RESPONSE</span> <span class="ot">-ne</span> 200 <span class="bu">]</span><span class="kw">;</span> <span class="cf">then</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;GenHook health check failed: </span><span class="va">$RESPONSE</span><span class="st">&quot;</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sudo</span> systemctl restart genhook</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Send alert notification</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="cf">fi</span></span></code></pre></div>
<p>This guide provides a comprehensive foundation for deploying GenHook
in production with proper security, monitoring, and maintenance
procedures.</p>
<h1 data-number="3" id="genhook-aws-deployment-guide"><span
class="header-section-number">3</span> GenHook AWS Deployment Guide</h1>
<h2 data-number="3.1" id="overview-5"><span
class="header-section-number">3.1</span> Overview</h2>
<p>This guide provides detailed instructions for deploying GenHook on
AWS with high availability, security, and scalability. The architecture
uses Application Load Balancer, Auto Scaling, and CloudWatch for a
production-ready deployment.</p>
<h2 data-number="3.2" id="architecture-diagram"><span
class="header-section-number">3.2</span> Architecture Diagram</h2>
<pre><code>Internet
    ↓
Application Load Balancer (ALB)
    ↓
Target Group (Health Checks)
    ↓
Auto Scaling Group
    ↓
EC2 Instances (GenHook)
    ↓
SL1 API (External)</code></pre>
<h2 data-number="3.3" id="aws-services-used"><span
class="header-section-number">3.3</span> AWS Services Used</h2>
<ul>
<li><strong>EC2</strong>: Application hosting</li>
<li><strong>Application Load Balancer</strong>: Traffic distribution and
SSL termination</li>
<li><strong>Auto Scaling Group</strong>: Automatic scaling based on
load</li>
<li><strong>CloudWatch</strong>: Monitoring and alerting</li>
<li><strong>Secrets Manager</strong>: Secure credential storage</li>
<li><strong>Certificate Manager</strong>: SSL certificate
management</li>
<li><strong>Route 53</strong>: DNS management (optional)</li>
<li><strong>S3</strong>: Configuration backups (optional)</li>
</ul>
<h2 data-number="3.4" id="step-by-step-deployment"><span
class="header-section-number">3.4</span> Step-by-Step Deployment</h2>
<h3 data-number="3.4.1" id="vpc-and-security-setup"><span
class="header-section-number">3.4.1</span> 1. VPC and Security
Setup</h3>
<h4 data-number="3.4.1.1" id="create-security-groups"><span
class="header-section-number">3.4.1.1</span> Create Security Groups</h4>
<div class="sourceCode" id="cb52"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GenHook Application Security Group</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ec2 create-security-group <span class="dt">\</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--group-name</span> genhook-app-sg <span class="dt">\</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--description</span> <span class="st">&quot;Security group for GenHook application&quot;</span> <span class="dt">\</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--vpc-id</span> vpc-xxxxxxxxx</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow HTTP from ALB</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ec2 authorize-security-group-ingress <span class="dt">\</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--group-id</span> sg-xxxxxxxxx <span class="dt">\</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--protocol</span> tcp <span class="dt">\</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">--port</span> 8000 <span class="dt">\</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">--source-group</span> sg-alb-xxxxxxxx</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow SSH for management</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ec2 authorize-security-group-ingress <span class="dt">\</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">--group-id</span> sg-xxxxxxxxx <span class="dt">\</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">--protocol</span> tcp <span class="dt">\</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">--port</span> 22 <span class="dt">\</span></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">--cidr</span> 10.0.0.0/8</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow HTTPS outbound to SL1</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ec2 authorize-security-group-egress <span class="dt">\</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">--group-id</span> sg-xxxxxxxxx <span class="dt">\</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">--protocol</span> tcp <span class="dt">\</span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">--port</span> 443 <span class="dt">\</span></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">--cidr</span> 0.0.0.0/0</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a><span class="co"># ALB Security Group</span></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ec2 create-security-group <span class="dt">\</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">--group-name</span> genhook-alb-sg <span class="dt">\</span></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">--description</span> <span class="st">&quot;Security group for GenHook ALB&quot;</span> <span class="dt">\</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">--vpc-id</span> vpc-xxxxxxxxx</span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow HTTPS from Internet</span></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ec2 authorize-security-group-ingress <span class="dt">\</span></span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">--group-id</span> sg-alb-xxxxxxxx <span class="dt">\</span></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">--protocol</span> tcp <span class="dt">\</span></span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">--port</span> 443 <span class="dt">\</span></span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">--cidr</span> 0.0.0.0/0</span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Allow HTTP (for redirect)</span></span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ec2 authorize-security-group-ingress <span class="dt">\</span></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">--group-id</span> sg-alb-xxxxxxxx <span class="dt">\</span></span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">--protocol</span> tcp <span class="dt">\</span></span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">--port</span> 80 <span class="dt">\</span></span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">--cidr</span> 0.0.0.0/0</span></code></pre></div>
<h3 data-number="3.4.2" id="ssl-certificate-setup"><span
class="header-section-number">3.4.2</span> 2. SSL Certificate Setup</h3>
<div class="sourceCode" id="cb53"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Request certificate via AWS Certificate Manager</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> acm request-certificate <span class="dt">\</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--domain-name</span> genhook.yourdomain.com <span class="dt">\</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--domain-name</span> <span class="st">&quot;*.yourdomain.com&quot;</span> <span class="dt">\</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--validation-method</span> DNS <span class="dt">\</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">--subject-alternative-names</span> genhook-api.yourdomain.com</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Note the ARN for ALB configuration</span></span></code></pre></div>
<h3 data-number="3.4.3" id="secrets-manager-setup"><span
class="header-section-number">3.4.3</span> 3. Secrets Manager Setup</h3>
<div class="sourceCode" id="cb54"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Store SL1 credentials in Secrets Manager</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> secretsmanager create-secret <span class="dt">\</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--name</span> genhook/sl1-credentials <span class="dt">\</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--description</span> <span class="st">&quot;SL1 API credentials for GenHook&quot;</span> <span class="dt">\</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--secret-string</span> <span class="st">&#39;{</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;api_url&quot;: &quot;https://your-sl1-instance.com/api/alert&quot;,</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;username&quot;: &quot;your_sl1_username&quot;,</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;password&quot;: &quot;your_sl1_password&quot;</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="st">    }&#39;</span></span></code></pre></div>
<h3 data-number="3.4.4" id="launch-template-creation"><span
class="header-section-number">3.4.4</span> 4. Launch Template
Creation</h3>
<p>Create a launch template for GenHook instances:</p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create launch template</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> ec2 create-launch-template <span class="dt">\</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--launch-template-name</span> genhook-template <span class="dt">\</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--launch-template-data</span> <span class="st">&#39;{</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;ImageId&quot;: &quot;ami-0c02fb55956c7d316&quot;,</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;InstanceType&quot;: &quot;t3.medium&quot;,</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;KeyName&quot;: &quot;your-key-pair&quot;,</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;SecurityGroupIds&quot;: [&quot;sg-xxxxxxxxx&quot;],</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;IamInstanceProfile&quot;: {</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="st">            &quot;Name&quot;: &quot;GenHookInstanceProfile&quot;</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="st">        },</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;UserData&quot;: &quot;&#39;</span><span class="va">$(</span><span class="fu">base64</span> <span class="at">-w</span> 0 user-data.sh<span class="va">)</span><span class="st">&#39;&quot;</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="st">    }&#39;</span></span></code></pre></div>
<h4 data-number="3.4.4.1" id="user-data-script-user-data.sh"><span
class="header-section-number">3.4.4.1</span> User Data Script
(<code>user-data.sh</code>)</h4>
<div class="sourceCode" id="cb56"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="ex">yum</span> update <span class="at">-y</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="ex">yum</span> install <span class="at">-y</span> python3 python3-pip git amazon-cloudwatch-agent</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Install AWS CLI</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="st">&quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot;</span> <span class="at">-o</span> <span class="st">&quot;awscliv2.zip&quot;</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="fu">unzip</span> awscliv2.zip</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ./aws/install</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create genhook user</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="ex">useradd</span> <span class="at">-m</span> <span class="at">-s</span> /bin/bash genhook</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup GenHook</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> /opt/genhook</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="fu">chown</span> genhook:genhook /opt/genhook</span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /opt/genhook</span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Clone repository</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook git clone https://github.com/rudipoppes/GenHook.git .</span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup Python environment</span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook python3 <span class="at">-m</span> venv venv</span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> genhook ./venv/bin/pip install <span class="at">-r</span> backend/requirements.txt</span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Get secrets from AWS Secrets Manager</span></span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a><span class="va">SECRET</span><span class="op">=</span><span class="va">$(</span><span class="ex">aws</span> secretsmanager get-secret-value <span class="dt">\</span></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">--secret-id</span> genhook/sl1-credentials <span class="dt">\</span></span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">--region</span> us-east-1 <span class="dt">\</span></span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">--query</span> SecretString <span class="at">--output</span> text<span class="va">)</span></span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-31"><a href="#cb56-31" aria-hidden="true" tabindex="-1"></a><span class="va">SL1_API_URL</span><span class="op">=</span><span class="va">$(</span><span class="bu">echo</span> <span class="va">$SECRET</span> <span class="kw">|</span> <span class="ex">jq</span> <span class="at">-r</span> .api_url<span class="va">)</span></span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a><span class="va">SL1_USERNAME</span><span class="op">=</span><span class="va">$(</span><span class="bu">echo</span> <span class="va">$SECRET</span> <span class="kw">|</span> <span class="ex">jq</span> <span class="at">-r</span> .username<span class="va">)</span></span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a><span class="va">SL1_PASSWORD</span><span class="op">=</span><span class="va">$(</span><span class="bu">echo</span> <span class="va">$SECRET</span> <span class="kw">|</span> <span class="ex">jq</span> <span class="at">-r</span> .password<span class="va">)</span></span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Create production configuration</span></span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> backend/config/app-config.ini <span class="op">&lt;&lt;EOF</span></span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a><span class="st">[server]</span></span>
<span id="cb56-38"><a href="#cb56-38" aria-hidden="true" tabindex="-1"></a><span class="st">host = 0.0.0.0</span></span>
<span id="cb56-39"><a href="#cb56-39" aria-hidden="true" tabindex="-1"></a><span class="st">port = 8000</span></span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a><span class="st">log_level = INFO</span></span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a><span class="st">[sl1]</span></span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a><span class="st">api_url = </span><span class="va">$SL1_API_URL</span></span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a><span class="st">username = </span><span class="va">$SL1_USERNAME</span></span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a><span class="st">password = </span><span class="va">$SL1_PASSWORD</span></span>
<span id="cb56-46"><a href="#cb56-46" aria-hidden="true" tabindex="-1"></a><span class="st">timeout = 30</span></span>
<span id="cb56-47"><a href="#cb56-47" aria-hidden="true" tabindex="-1"></a><span class="st">retry_attempts = 3</span></span>
<span id="cb56-48"><a href="#cb56-48" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb56-49"><a href="#cb56-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-50"><a href="#cb56-50" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> backend/config/web-config.ini <span class="op">&lt;&lt;EOF</span></span>
<span id="cb56-51"><a href="#cb56-51" aria-hidden="true" tabindex="-1"></a><span class="st">[ui]</span></span>
<span id="cb56-52"><a href="#cb56-52" aria-hidden="true" tabindex="-1"></a><span class="st">enabled = true</span></span>
<span id="cb56-53"><a href="#cb56-53" aria-hidden="true" tabindex="-1"></a><span class="st">max_analysis_depth = 3</span></span>
<span id="cb56-54"><a href="#cb56-54" aria-hidden="true" tabindex="-1"></a><span class="st">timeout_seconds = 30</span></span>
<span id="cb56-55"><a href="#cb56-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-56"><a href="#cb56-56" aria-hidden="true" tabindex="-1"></a><span class="st">[features]</span></span>
<span id="cb56-57"><a href="#cb56-57" aria-hidden="true" tabindex="-1"></a><span class="st">backup_configs = true</span></span>
<span id="cb56-58"><a href="#cb56-58" aria-hidden="true" tabindex="-1"></a><span class="st"># Dynamic configuration loading enabled - no restart needed</span></span>
<span id="cb56-59"><a href="#cb56-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-60"><a href="#cb56-60" aria-hidden="true" tabindex="-1"></a><span class="st">[paths]</span></span>
<span id="cb56-61"><a href="#cb56-61" aria-hidden="true" tabindex="-1"></a><span class="st">config_file_path = config/webhook-config.ini</span></span>
<span id="cb56-62"><a href="#cb56-62" aria-hidden="true" tabindex="-1"></a><span class="st">backup_directory = config/backups</span></span>
<span id="cb56-63"><a href="#cb56-63" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb56-64"><a href="#cb56-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-65"><a href="#cb56-65" aria-hidden="true" tabindex="-1"></a><span class="co"># Create systemd service</span></span>
<span id="cb56-66"><a href="#cb56-66" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> /etc/systemd/system/genhook.service <span class="op">&lt;&lt;EOF</span></span>
<span id="cb56-67"><a href="#cb56-67" aria-hidden="true" tabindex="-1"></a><span class="st">[Unit]</span></span>
<span id="cb56-68"><a href="#cb56-68" aria-hidden="true" tabindex="-1"></a><span class="st">Description=GenHook Webhook Receiver</span></span>
<span id="cb56-69"><a href="#cb56-69" aria-hidden="true" tabindex="-1"></a><span class="st">After=network.target</span></span>
<span id="cb56-70"><a href="#cb56-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-71"><a href="#cb56-71" aria-hidden="true" tabindex="-1"></a><span class="st">[Service]</span></span>
<span id="cb56-72"><a href="#cb56-72" aria-hidden="true" tabindex="-1"></a><span class="st">Type=simple</span></span>
<span id="cb56-73"><a href="#cb56-73" aria-hidden="true" tabindex="-1"></a><span class="st">User=genhook</span></span>
<span id="cb56-74"><a href="#cb56-74" aria-hidden="true" tabindex="-1"></a><span class="st">Group=genhook</span></span>
<span id="cb56-75"><a href="#cb56-75" aria-hidden="true" tabindex="-1"></a><span class="st">WorkingDirectory=/opt/genhook/backend</span></span>
<span id="cb56-76"><a href="#cb56-76" aria-hidden="true" tabindex="-1"></a><span class="st">Environment=PYTHONPATH=/opt/genhook/backend</span></span>
<span id="cb56-77"><a href="#cb56-77" aria-hidden="true" tabindex="-1"></a><span class="st">ExecStart=/opt/genhook/venv/bin/python main.py</span></span>
<span id="cb56-78"><a href="#cb56-78" aria-hidden="true" tabindex="-1"></a><span class="st">Restart=always</span></span>
<span id="cb56-79"><a href="#cb56-79" aria-hidden="true" tabindex="-1"></a><span class="st">RestartSec=3</span></span>
<span id="cb56-80"><a href="#cb56-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-81"><a href="#cb56-81" aria-hidden="true" tabindex="-1"></a><span class="st">[Install]</span></span>
<span id="cb56-82"><a href="#cb56-82" aria-hidden="true" tabindex="-1"></a><span class="st">WantedBy=multi-user.target</span></span>
<span id="cb56-83"><a href="#cb56-83" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb56-84"><a href="#cb56-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-85"><a href="#cb56-85" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup CloudWatch agent</span></span>
<span id="cb56-86"><a href="#cb56-86" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json <span class="op">&lt;&lt;EOF</span></span>
<span id="cb56-87"><a href="#cb56-87" aria-hidden="true" tabindex="-1"></a><span class="st">{</span></span>
<span id="cb56-88"><a href="#cb56-88" aria-hidden="true" tabindex="-1"></a><span class="st">    &quot;logs&quot;: {</span></span>
<span id="cb56-89"><a href="#cb56-89" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;logs_collected&quot;: {</span></span>
<span id="cb56-90"><a href="#cb56-90" aria-hidden="true" tabindex="-1"></a><span class="st">            &quot;files&quot;: {</span></span>
<span id="cb56-91"><a href="#cb56-91" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;collect_list&quot;: [</span></span>
<span id="cb56-92"><a href="#cb56-92" aria-hidden="true" tabindex="-1"></a><span class="st">                    {</span></span>
<span id="cb56-93"><a href="#cb56-93" aria-hidden="true" tabindex="-1"></a><span class="st">                        &quot;file_path&quot;: &quot;/opt/genhook/logs/application.log&quot;,</span></span>
<span id="cb56-94"><a href="#cb56-94" aria-hidden="true" tabindex="-1"></a><span class="st">                        &quot;log_group_name&quot;: &quot;genhook&quot;,</span></span>
<span id="cb56-95"><a href="#cb56-95" aria-hidden="true" tabindex="-1"></a><span class="st">                        &quot;log_stream_name&quot;: &quot;application&quot;</span></span>
<span id="cb56-96"><a href="#cb56-96" aria-hidden="true" tabindex="-1"></a><span class="st">                    }</span></span>
<span id="cb56-97"><a href="#cb56-97" aria-hidden="true" tabindex="-1"></a><span class="st">                ]</span></span>
<span id="cb56-98"><a href="#cb56-98" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb56-99"><a href="#cb56-99" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb56-100"><a href="#cb56-100" aria-hidden="true" tabindex="-1"></a><span class="st">    },</span></span>
<span id="cb56-101"><a href="#cb56-101" aria-hidden="true" tabindex="-1"></a><span class="st">    &quot;metrics&quot;: {</span></span>
<span id="cb56-102"><a href="#cb56-102" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;namespace&quot;: &quot;GenHook/Application&quot;,</span></span>
<span id="cb56-103"><a href="#cb56-103" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;metrics_collected&quot;: {</span></span>
<span id="cb56-104"><a href="#cb56-104" aria-hidden="true" tabindex="-1"></a><span class="st">            &quot;cpu&quot;: {</span></span>
<span id="cb56-105"><a href="#cb56-105" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;measurement&quot;: [</span></span>
<span id="cb56-106"><a href="#cb56-106" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;cpu_usage_idle&quot;,</span></span>
<span id="cb56-107"><a href="#cb56-107" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;cpu_usage_iowait&quot;,</span></span>
<span id="cb56-108"><a href="#cb56-108" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;cpu_usage_user&quot;,</span></span>
<span id="cb56-109"><a href="#cb56-109" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;cpu_usage_system&quot;</span></span>
<span id="cb56-110"><a href="#cb56-110" aria-hidden="true" tabindex="-1"></a><span class="st">                ],</span></span>
<span id="cb56-111"><a href="#cb56-111" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;metrics_collection_interval&quot;: 60</span></span>
<span id="cb56-112"><a href="#cb56-112" aria-hidden="true" tabindex="-1"></a><span class="st">            },</span></span>
<span id="cb56-113"><a href="#cb56-113" aria-hidden="true" tabindex="-1"></a><span class="st">            &quot;disk&quot;: {</span></span>
<span id="cb56-114"><a href="#cb56-114" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;measurement&quot;: [</span></span>
<span id="cb56-115"><a href="#cb56-115" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;used_percent&quot;</span></span>
<span id="cb56-116"><a href="#cb56-116" aria-hidden="true" tabindex="-1"></a><span class="st">                ],</span></span>
<span id="cb56-117"><a href="#cb56-117" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;metrics_collection_interval&quot;: 60,</span></span>
<span id="cb56-118"><a href="#cb56-118" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;resources&quot;: [</span></span>
<span id="cb56-119"><a href="#cb56-119" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;*&quot;</span></span>
<span id="cb56-120"><a href="#cb56-120" aria-hidden="true" tabindex="-1"></a><span class="st">                ]</span></span>
<span id="cb56-121"><a href="#cb56-121" aria-hidden="true" tabindex="-1"></a><span class="st">            },</span></span>
<span id="cb56-122"><a href="#cb56-122" aria-hidden="true" tabindex="-1"></a><span class="st">            &quot;mem&quot;: {</span></span>
<span id="cb56-123"><a href="#cb56-123" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;measurement&quot;: [</span></span>
<span id="cb56-124"><a href="#cb56-124" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;mem_used_percent&quot;</span></span>
<span id="cb56-125"><a href="#cb56-125" aria-hidden="true" tabindex="-1"></a><span class="st">                ],</span></span>
<span id="cb56-126"><a href="#cb56-126" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;metrics_collection_interval&quot;: 60</span></span>
<span id="cb56-127"><a href="#cb56-127" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb56-128"><a href="#cb56-128" aria-hidden="true" tabindex="-1"></a><span class="st">        }</span></span>
<span id="cb56-129"><a href="#cb56-129" aria-hidden="true" tabindex="-1"></a><span class="st">    }</span></span>
<span id="cb56-130"><a href="#cb56-130" aria-hidden="true" tabindex="-1"></a><span class="st">}</span></span>
<span id="cb56-131"><a href="#cb56-131" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span>
<span id="cb56-132"><a href="#cb56-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-133"><a href="#cb56-133" aria-hidden="true" tabindex="-1"></a><span class="co"># Start services</span></span>
<span id="cb56-134"><a href="#cb56-134" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> daemon-reload</span>
<span id="cb56-135"><a href="#cb56-135" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> enable genhook</span>
<span id="cb56-136"><a href="#cb56-136" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> start genhook</span>
<span id="cb56-137"><a href="#cb56-137" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> enable amazon-cloudwatch-agent</span>
<span id="cb56-138"><a href="#cb56-138" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> start amazon-cloudwatch-agent</span></code></pre></div>
<h3 data-number="3.4.5" id="iam-roles-and-policies"><span
class="header-section-number">3.4.5</span> 5. IAM Roles and
Policies</h3>
<h4 data-number="3.4.5.1" id="create-iam-role-for-ec2-instances"><span
class="header-section-number">3.4.5.1</span> Create IAM Role for EC2
Instances</h4>
<div class="sourceCode" id="cb57"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Version&quot;</span><span class="fu">:</span> <span class="st">&quot;2012-10-17&quot;</span><span class="fu">,</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;Statement&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Effect&quot;</span><span class="fu">:</span> <span class="st">&quot;Allow&quot;</span><span class="fu">,</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Action&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;secretsmanager:GetSecretValue&quot;</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Resource&quot;</span><span class="fu">:</span> <span class="st">&quot;arn:aws:secretsmanager:*:*:secret:genhook/sl1-credentials*&quot;</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Effect&quot;</span><span class="fu">:</span> <span class="st">&quot;Allow&quot;</span><span class="fu">,</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Action&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;cloudwatch:PutMetricData&quot;</span><span class="ot">,</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;logs:PutLogEvents&quot;</span><span class="ot">,</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;logs:CreateLogGroup&quot;</span><span class="ot">,</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;logs:CreateLogStream&quot;</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Resource&quot;</span><span class="fu">:</span> <span class="st">&quot;*&quot;</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">{</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Effect&quot;</span><span class="fu">:</span> <span class="st">&quot;Allow&quot;</span><span class="fu">,</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Action&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;s3:PutObject&quot;</span><span class="ot">,</span></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;s3:GetObject&quot;</span></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>            <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>            <span class="dt">&quot;Resource&quot;</span><span class="fu">:</span> <span class="st">&quot;arn:aws:s3:::your-genhook-backups/*&quot;</span></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>        <span class="fu">}</span></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 data-number="3.4.6" id="application-load-balancer-setup"><span
class="header-section-number">3.4.6</span> 6. Application Load Balancer
Setup</h3>
<div class="sourceCode" id="cb58"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create ALB</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> elbv2 create-load-balancer <span class="dt">\</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--name</span> genhook-alb <span class="dt">\</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--subnets</span> subnet-xxxxxx subnet-yyyyyy <span class="dt">\</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--security-groups</span> sg-alb-xxxxxxxx <span class="dt">\</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">--scheme</span> internet-facing <span class="dt">\</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">--type</span> application <span class="dt">\</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">--ip-address-type</span> ipv4</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Target Group</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> elbv2 create-target-group <span class="dt">\</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">--name</span> genhook-tg <span class="dt">\</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">--protocol</span> HTTP <span class="dt">\</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">--port</span> 8000 <span class="dt">\</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">--vpc-id</span> vpc-xxxxxxxxx <span class="dt">\</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">--health-check-path</span> /health <span class="dt">\</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">--health-check-interval-seconds</span> 30 <span class="dt">\</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">--health-check-timeout-seconds</span> 5 <span class="dt">\</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">--healthy-threshold-count</span> 2 <span class="dt">\</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">--unhealthy-threshold-count</span> 3</span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Create HTTPS Listener</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> elbv2 create-listener <span class="dt">\</span></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">--load-balancer-arn</span> arn:aws:elasticloadbalancing:region:account:loadbalancer/app/genhook-alb/xxxxxxxxx <span class="dt">\</span></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">--protocol</span> HTTPS <span class="dt">\</span></span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">--port</span> 443 <span class="dt">\</span></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">--certificates</span> CertificateArn=arn:aws:acm:region:account:certificate/xxxxxxxxx <span class="dt">\</span></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">--default-actions</span> Type=forward,TargetGroupArn=arn:aws:elasticloadbalancing:region:account:targetgroup/genhook-tg/xxxxxxxxx</span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Create HTTP Listener (redirect to HTTPS)</span></span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> elbv2 create-listener <span class="dt">\</span></span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">--load-balancer-arn</span> arn:aws:elasticloadbalancing:region:account:loadbalancer/app/genhook-alb/xxxxxxxxx <span class="dt">\</span></span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">--protocol</span> HTTP <span class="dt">\</span></span>
<span id="cb58-34"><a href="#cb58-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">--port</span> 80 <span class="dt">\</span></span>
<span id="cb58-35"><a href="#cb58-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">--default-actions</span> Type=redirect,RedirectConfig=<span class="st">&#39;{Protocol=HTTPS,Port=443,StatusCode=HTTP_301}&#39;</span></span></code></pre></div>
<h3 data-number="3.4.7" id="auto-scaling-group"><span
class="header-section-number">3.4.7</span> 7. Auto Scaling Group</h3>
<div class="sourceCode" id="cb59"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create Auto Scaling Group</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> autoscaling create-auto-scaling-group <span class="dt">\</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--auto-scaling-group-name</span> genhook-asg <span class="dt">\</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--launch-template</span> LaunchTemplateName=genhook-template,Version=1 <span class="dt">\</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--min-size</span> 2 <span class="dt">\</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">--max-size</span> 6 <span class="dt">\</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">--desired-capacity</span> 2 <span class="dt">\</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">--target-group-arns</span> arn:aws:elasticloadbalancing:region:account:targetgroup/genhook-tg/xxxxxxxxx <span class="dt">\</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--health-check-type</span> ELB <span class="dt">\</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--health-check-grace-period</span> 300 <span class="dt">\</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">--vpc-zone-identifier</span> <span class="st">&quot;subnet-xxxxxx,subnet-yyyyyy&quot;</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Create scaling policies</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> autoscaling put-scaling-policy <span class="dt">\</span></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">--auto-scaling-group-name</span> genhook-asg <span class="dt">\</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">--policy-name</span> genhook-scale-up <span class="dt">\</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">--policy-type</span> TargetTrackingScaling <span class="dt">\</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">--target-tracking-configuration</span> <span class="st">&#39;{</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;TargetValue&quot;: 70.0,</span></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;PredefinedMetricSpecification&quot;: {</span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a><span class="st">            &quot;PredefinedMetricType&quot;: &quot;ASGAverageCPUUtilization&quot;</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="st">        },</span></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;ScaleOutCooldown&quot;: 300,</span></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;ScaleInCooldown&quot;: 300</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a><span class="st">    }&#39;</span></span></code></pre></div>
<h3 data-number="3.4.8" id="cloudwatch-monitoring"><span
class="header-section-number">3.4.8</span> 8. CloudWatch Monitoring</h3>
<h4 data-number="3.4.8.1" id="custom-metrics"><span
class="header-section-number">3.4.8.1</span> Custom Metrics</h4>
<div class="sourceCode" id="cb60"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create CloudWatch dashboard</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> cloudwatch put-dashboard <span class="dt">\</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--dashboard-name</span> GenHook <span class="dt">\</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--dashboard-body</span> <span class="st">&#39;{</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;widgets&quot;: [</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="st">            {</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;type&quot;: &quot;metric&quot;,</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;properties&quot;: {</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;metrics&quot;: [</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a><span class="st">                        [&quot;AWS/ApplicationELB&quot;, &quot;RequestCount&quot;, &quot;LoadBalancer&quot;, &quot;app/genhook-alb/xxxxxxxxx&quot;],</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="st">                        [&quot;AWS/ApplicationELB&quot;, &quot;TargetResponseTime&quot;, &quot;LoadBalancer&quot;, &quot;app/genhook-alb/xxxxxxxxx&quot;],</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="st">                        [&quot;AWS/ApplicationELB&quot;, &quot;HTTPCode_ELB_5XX_Count&quot;, &quot;LoadBalancer&quot;, &quot;app/genhook-alb/xxxxxxxxx&quot;]</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a><span class="st">                    ],</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;period&quot;: 300,</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;stat&quot;: &quot;Sum&quot;,</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;region&quot;: &quot;us-east-1&quot;,</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;title&quot;: &quot;ALB Metrics&quot;</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a><span class="st">                }</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a><span class="st">        ]</span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a><span class="st">    }&#39;</span></span></code></pre></div>
<h4 data-number="3.4.8.2" id="alarms"><span
class="header-section-number">3.4.8.2</span> Alarms</h4>
<div class="sourceCode" id="cb61"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># High error rate alarm</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> cloudwatch put-metric-alarm <span class="dt">\</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--alarm-name</span> <span class="st">&quot;GenHook-High-Error-Rate&quot;</span> <span class="dt">\</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--alarm-description</span> <span class="st">&quot;GenHook 5XX error rate is too high&quot;</span> <span class="dt">\</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--metric-name</span> HTTPCode_ELB_5XX_Count <span class="dt">\</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">--namespace</span> AWS/ApplicationELB <span class="dt">\</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">--statistic</span> Sum <span class="dt">\</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">--period</span> 300 <span class="dt">\</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--threshold</span> 10 <span class="dt">\</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--comparison-operator</span> GreaterThanThreshold <span class="dt">\</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">--evaluation-periods</span> 2 <span class="dt">\</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">--alarm-actions</span> arn:aws:sns:us-east-1:account:genhook-alerts</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="co"># High response time alarm</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> cloudwatch put-metric-alarm <span class="dt">\</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">--alarm-name</span> <span class="st">&quot;GenHook-High-Response-Time&quot;</span> <span class="dt">\</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">--alarm-description</span> <span class="st">&quot;GenHook response time is too high&quot;</span> <span class="dt">\</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">--metric-name</span> TargetResponseTime <span class="dt">\</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">--namespace</span> AWS/ApplicationELB <span class="dt">\</span></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">--statistic</span> Average <span class="dt">\</span></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">--period</span> 300 <span class="dt">\</span></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">--threshold</span> 2.0 <span class="dt">\</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">--comparison-operator</span> GreaterThanThreshold <span class="dt">\</span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">--evaluation-periods</span> 2 <span class="dt">\</span></span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">--alarm-actions</span> arn:aws:sns:us-east-1:account:genhook-alerts</span></code></pre></div>
<h3 data-number="3.4.9" id="route-53-dns-setup"><span
class="header-section-number">3.4.9</span> 9. Route 53 DNS Setup</h3>
<div class="sourceCode" id="cb62"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create hosted zone (if not exists)</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> route53 create-hosted-zone <span class="dt">\</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--name</span> yourdomain.com <span class="dt">\</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--caller-reference</span> <span class="va">$(</span><span class="fu">date</span> +%s<span class="va">)</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create A record pointing to ALB</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> route53 change-resource-record-sets <span class="dt">\</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">--hosted-zone-id</span> Z1234567890ABC <span class="dt">\</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">--change-batch</span> <span class="st">&#39;{</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="st">        &quot;Changes&quot;: [{</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="st">            &quot;Action&quot;: &quot;CREATE&quot;,</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="st">            &quot;ResourceRecordSet&quot;: {</span></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;Name&quot;: &quot;genhook.yourdomain.com&quot;,</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;Type&quot;: &quot;A&quot;,</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a><span class="st">                &quot;AliasTarget&quot;: {</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;DNSName&quot;: &quot;genhook-alb-xxxxxxxxx.us-east-1.elb.amazonaws.com&quot;,</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;EvaluateTargetHealth&quot;: true,</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a><span class="st">                    &quot;HostedZoneId&quot;: &quot;Z35SXDOTRQ7X7K&quot;</span></span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a><span class="st">                }</span></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a><span class="st">            }</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a><span class="st">        }]</span></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a><span class="st">    }&#39;</span></span></code></pre></div>
<h3 data-number="3.4.10" id="configuration-backup-to-s3"><span
class="header-section-number">3.4.10</span> 10. Configuration Backup to
S3</h3>
<p>Add this to your GenHook application for automatic backups:</p>
<div class="sourceCode" id="cb63"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> boto3</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> S3ConfigBackup:</span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, bucket_name):</span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.s3_client <span class="op">=</span> boto3.client(<span class="st">&#39;s3&#39;</span>)</span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.bucket_name <span class="op">=</span> bucket_name</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> backup_config(<span class="va">self</span>, config_data):</span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>        timestamp <span class="op">=</span> datetime.now().strftime(<span class="st">&#39;%Y%m</span><span class="sc">%d</span><span class="st">_%H%M%S&#39;</span>)</span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="ss">f&quot;genhook/configs/backup_</span><span class="sc">{</span>timestamp<span class="sc">}</span><span class="ss">.json&quot;</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>            <span class="va">self</span>.s3_client.put_object(</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>                Bucket<span class="op">=</span><span class="va">self</span>.bucket_name,</span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>                Key<span class="op">=</span>key,</span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a>                Body<span class="op">=</span>json.dumps(config_data, indent<span class="op">=</span><span class="dv">2</span>),</span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a>                ContentType<span class="op">=</span><span class="st">&#39;application/json&#39;</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> key</span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>            logger.error(<span class="ss">f&quot;Failed to backup config to S3: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="va">None</span></span></code></pre></div>
<h2 data-number="3.5" id="web-interface-access-control"><span
class="header-section-number">3.5</span> Web Interface Access
Control</h2>
<h3 data-number="3.5.1" id="alb-listener-rules-for-web-interface"><span
class="header-section-number">3.5.1</span> ALB Listener Rules for Web
Interface</h3>
<div class="sourceCode" id="cb64"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create rule to restrict /config access</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> elbv2 create-rule <span class="dt">\</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--listener-arn</span> arn:aws:elasticloadbalancing:region:account:listener/app/genhook-alb/xxxxxxxxx/xxxxxxxxx <span class="dt">\</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--conditions</span> Field=path-pattern,Values=<span class="st">&#39;/config*&#39;</span> <span class="dt">\</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">--priority</span> 100 <span class="dt">\</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">--actions</span> Type=fixed-response,FixedResponseConfig=<span class="st">&#39;{StatusCode=403,ContentType=text/plain,MessageBody=&quot;Access Denied&quot;}&#39;</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Create rule for specific IP ranges</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> elbv2 create-rule <span class="dt">\</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">--listener-arn</span> arn:aws:elasticloadbalancing:region:account:listener/app/genhook-alb/xxxxxxxxx/xxxxxxxxx <span class="dt">\</span></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">--conditions</span> Field=path-pattern,Values=<span class="st">&#39;/config*&#39;</span> Field=source-ip,Values=<span class="st">&#39;203.0.113.0/24,198.51.100.0/24&#39;</span> <span class="dt">\</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">--priority</span> 50 <span class="dt">\</span></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">--actions</span> Type=forward,TargetGroupArn=arn:aws:elasticloadbalancing:region:account:targetgroup/genhook-tg/xxxxxxxxx</span></code></pre></div>
<h2 data-number="3.6" id="cost-optimization"><span
class="header-section-number">3.6</span> Cost Optimization</h2>
<h3 data-number="3.6.1" id="instance-rightsizing"><span
class="header-section-number">3.6.1</span> Instance Rightsizing</h3>
<ul>
<li><strong>t3.micro</strong>: Development/testing (1 vCPU, 1GB RAM) -
~$8.50/month</li>
<li><strong>t3.small</strong>: Light production (2 vCPU, 2GB RAM) -
~$17/month<br />
</li>
<li><strong>t3.medium</strong>: Moderate load (2 vCPU, 4GB RAM) -
~$34/month</li>
<li><strong>c5.large</strong>: High performance (2 vCPU, 4GB RAM) -
~$62/month</li>
</ul>
<h3 data-number="3.6.2" id="reserved-instances"><span
class="header-section-number">3.6.2</span> Reserved Instances</h3>
<p>Consider Reserved Instances for 30-60% cost savings on long-term
deployments.</p>
<h2 data-number="3.7" id="disaster-recovery"><span
class="header-section-number">3.7</span> Disaster Recovery</h2>
<h3 data-number="3.7.1" id="multi-az-deployment"><span
class="header-section-number">3.7.1</span> Multi-AZ Deployment</h3>
<div class="sourceCode" id="cb65"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy across multiple AZs</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="ex">aws</span> autoscaling update-auto-scaling-group <span class="dt">\</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">--auto-scaling-group-name</span> genhook-asg <span class="dt">\</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">--vpc-zone-identifier</span> <span class="st">&quot;subnet-xxxxxx,subnet-yyyyyy,subnet-zzzzzz&quot;</span></span></code></pre></div>
<h3 data-number="3.7.2" id="cross-region-backup"><span
class="header-section-number">3.7.2</span> Cross-Region Backup</h3>
<div class="sourceCode" id="cb66"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cross-region S3 backup</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>s3_client_dr <span class="op">=</span> boto3.client(<span class="st">&#39;s3&#39;</span>, region_name<span class="op">=</span><span class="st">&#39;us-west-2&#39;</span>)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>s3_client_dr.copy_object(</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    CopySource<span class="op">=</span>{<span class="st">&#39;Bucket&#39;</span>: <span class="st">&#39;genhook-backups&#39;</span>, <span class="st">&#39;Key&#39;</span>: config_key},</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    Bucket<span class="op">=</span><span class="st">&#39;genhook-backups-dr&#39;</span>,</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    Key<span class="op">=</span>config_key</span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>This AWS deployment guide provides a robust, scalable, and secure
foundation for running GenHook in production on AWS infrastructure.</p>
</body>
</html>
