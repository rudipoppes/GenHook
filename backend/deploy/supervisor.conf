# Supervisor configuration for GenHook
[program:genhook]
command=/opt/genhook/venv/bin/python main.py
directory=/opt/genhook/backend
user=genhook
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/genhook/app.log
stdout_logfile_maxbytes=50MB
stdout_logfile_backups=5
environment=PYTHONPATH="/opt/genhook/backend"
# Auto-restart if process exits unexpectedly
autorestart=unexpected
# Kill process group on stop
killasgroup=true
stopasgroup=true

[program:genhook-monitor]
command=/opt/genhook/backend/deploy/monitor.sh
directory=/opt/genhook
user=genhook
autostart=true
autorestart=true
startretries=3
redirect_stderr=true
stdout_logfile=/var/log/genhook/monitor.log